define(["app","handlebars","text!apps/channels/edit/templates/edit_moderators_layout.html","text!apps/channels/edit/templates/edit_moderators_add.html","text!apps/channels/edit/templates/moderator_item.html","apps/commons/list/listView"],function(e,t,n,r,i,s){return e.module("ChannelsApp.EditModerators.View",function(e,o,u,a,f,l){e.Layout=a.Layout.extend({template:t.compile(n),regions:{moderators:"#moderators-list",addModerator:"#add-moderator"},initialize:function(n){var r=this;this.on("show",function(){var n=new e.AddModeratorForm,s=r.model.get("moderators"),o=new e.ModeratorsView({collection:s,templateItemView:t.compile(i),tagName:'div class="row"',tagNameItemView:'div class="col-xs-6 col-sm-3" style="margin:5px 0px;border:0"',sizeImage:"100px"}),u=l.bind(r.addModeratorClicked,r),a=l.bind(r.deleteModeratorClicked,r);this.listenTo(n,"add-moderator",u),this.listenTo(o,"delete-moderator",a),r.moderators.show(o),r.addModerator.show(n)})},addModeratorClicked:function(e,t){this.trigger("add-moderator",this.model,e,t)},deleteModeratorClicked:function(e){this.trigger("delete-moderator",this.model,e)},showErrors:function(e){this.$el.find("#alert-danger").html(e).removeClass("hide").show()}}),e.AddModeratorForm=a.ItemView.extend({template:r,events:{"click .btn-send-message":"addClicked"},addClicked:function(){var e=this.$el.find("input[name=moderator]").val(),t=this.$el.find("select[name=level]").val();this.trigger("add-moderator",e,t)}}),e.ModeratorsView=s.CompositeView.extend({subviewEvents:{"click .delete":"deleteModerator"},deleteModerator:function(e){var t=this;require(["apps/commons/dialog/dialog_view"],function(n){n.confirm("Are you sure you want to delete this moderator?","Delete moderator").then(function(n){n&&t.trigger("delete-moderator",e.model)})})}})}),e.ChannelsApp.EditModerators.View});