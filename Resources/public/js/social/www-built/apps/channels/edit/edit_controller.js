/*! Lazy Load 1.9.3 - MIT license - Copyright 2010-2013 Mika Tuupola */

/* ========================================================================
 * Bootstrap: modal.js v3.1.1
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/**
 * Backbone Forms v0.14.0
 *
 * NOTE:
 * This version is for use with RequireJS
 * If using regular <script> tags to include your files, use backbone-forms.min.js
 *
 * Copyright (c) 2013 Charles Davison, Pow Media Ltd
 * 
 * License and more information at:
 * http://github.com/powmedia/backbone-forms
 */

/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */

function slug(e){e=e.replace(/^\s+|\s+$/g,""),e=e.toLowerCase();var t="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",n="aaaaaeeeeeiiiiooooouuuunc------";for(var r=0,i=t.length;r<i;r++)e=e.replace(new RegExp(t.charAt(r),"g"),n.charAt(r));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),"#"+e}function removeAndAddClass(e,t,n){$(e).removeClass(t),$(n).addClass(t)}function uniqid(e,t){typeof e=="undefined"&&(e="");var n,r=function(e,t){return e=parseInt(e,10).toString(16),t<e.length?e.slice(e.length-t):t>e.length?Array(1+(t-e.length)).join("0")+e:e};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(Math.random()*123456789)),this.php_js.uniqidSeed++,n=e,n+=r(parseInt((new Date).getTime()/1e3,10),8),n+=r(this.php_js.uniqidSeed,5),t&&(n+=(Math.random()*10).toFixed(8).toString()),n}define("text!apps/dashboard/show/templates/list_photos.html",[],function(){return'<a data-rel="colorbox" class="cboxElement">\n	<div style="width:150px;height:150px;" >\n        <img class="lazy" data-original="{{path_medium}}">\n    </div>\n</a>\n\n'}),!function(e,t,n,r){var i=e(t);e.fn.lazyload=function(s){function o(){var t=0;f.each(function(){var n=e(this);if(!l.skip_invisible||n.is(":visible"))if(!e.abovethetop(this,l)&&!e.leftofbegin(this,l))if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else n.trigger("appear"),t=0})}var u,f=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(r!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),r!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(l,s)),u=l.container===r||l.container===t?i:e(l.container),0===l.event.indexOf("scroll")&&u.bind(l.event,function(){return o()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",l.placeholder),n.one("appear",function(){if(!this.loaded){if(l.appear){var r=f.length;l.appear.call(t,r,l)}e("<img />").bind("load",function(){var r=n.attr("data-"+l.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[l.effect](l.effect_speed),t.loaded=!0;var i=e.grep(f,function(e){return!e.loaded});if(f=e(i),l.load){var s=f.length;l.load.call(t,s,l)}}).attr("src",n.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&n.bind(l.event,function(){t.loaded||n.trigger("appear")})}),i.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&f.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){o()}),this},e.belowthefold=function(n,s){var o;return o=s.container===r||s.container===t?(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():e(s.container).offset().top+e(s.container).height(),o<=e(n).offset().top-s.threshold},e.rightoffold=function(n,s){var o;return o=s.container===r||s.container===t?i.width()+i.scrollLeft():e(s.container).offset().left+e(s.container).width(),o<=e(n).offset().left-s.threshold},e.abovethetop=function(n,s){var o;return o=s.container===r||s.container===t?i.scrollTop():e(s.container).offset().top,o>=e(n).offset().top+s.threshold+e(n).height()},e.leftofbegin=function(n,s){var o;return o=s.container===r||s.container===t?i.scrollLeft():e(s.container).offset().left,o>=e(n).offset().left+s.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("jquery-lazyload",["jquery"],function(){}),define("util/lazyloaderhelper",["jquery-lazyload"],function(){var e=function(e){var t=!1;e.on("show",function(){e.$el.find("img.lazy").lazyload({effect:"fadeIn"}),e.on("after:item:added",function(e){e.$el.find("img.lazy").lazyload({effect:"fadeIn"}),e.on("show",function(){e.$el.find("img.lazy").lazyload({effect:"fadeIn"}),t=!0})})})};return e}),define("text!apps/commons/dialog/templates/dialog_template.html",[],function(){return'  <div class="modal-dialog">\n              <div class="modal-content">\n    <% if (title) { %>\n        <div class="modal-header">\n          <% if (allowCancel) { %>\n            <a class="close">×</a>\n          <% } %>\n          <h3><%= title %></h3>\n        </div>\n      <% } %>\n      <div class="modal-body"><%= content %></div>\n      <div class="modal-footer">\n        <% if (allowCancel) { %>\n          <% if (cancelText) { %>\n            <a class="btn cancel"><%= cancelText %></a>\n          <% } %>\n        <% } %>\n        <a class="btn ok btn-primary"><%= okText %></a>\n      </div>\n    </div>\n  </div>'}),+function(e){var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r);if(this.isShown||r.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(i)}).emulateTransitionEnd(300):n.$element.focus().trigger(i)})},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]!==e.target&&!this.$element.has(e.target).length&&this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&n;this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;r?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),typeof n=="object"&&n);s||i.data("bs.modal",s=new t(this,o)),typeof n=="string"?s[n](r):o.show&&s.show(r)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());n.is("a")&&t.preventDefault(),i.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),define("bootstrap-modal",["jquery","backbone"],function(){}),function(e,t,n){var r=t.templateSettings;t.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g};var i=t.template('    <% if (title) { %>      <div class="modal-header">        <% if (allowCancel) { %>          <a class="close">×</a>        <% } %>        <h3>{{title}}</h3>      </div>    <% } %>    <div class="modal-body">{{content}}</div>    <div class="modal-footer">      <% if (allowCancel) { %>        <% if (cancelText) { %>          <a href="#" class="btn cancel">{{cancelText}}</a>        <% } %>      <% } %>      <a href="#" class="btn ok btn-primary">{{okText}}</a>    </div>  ');t.templateSettings=r;var s=n.View.extend({className:"modal",events:{"click .close":function(e){e.preventDefault(),this.trigger("cancel"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("cancel",this)},"click .cancel":function(e){e.preventDefault(),this.trigger("cancel"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("cancel",this)},"click .ok":function(e){e.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this),this.options.okCloses&&this.close()}},initialize:function(e){this.options=t.extend({title:null,okText:"OK",focusOk:!0,okCloses:!0,cancelText:"Cancel",allowCancel:!0,escape:!0,animate:!1,template:i},e)},render:function(){var e=this.$el,t=this.options,n=t.content;e.html(t.template(t));var r=this.$content=e.find(".modal-body");return n.$el&&(n.render(),e.find(".modal-body").html(n.$el)),t.animate&&e.addClass("fade"),this.isRendered=!0,this},open:function(n){this.isRendered||this.render();var r=this,i=this.$el;i.modal(t.extend({keyboard:this.options.allowCancel,backdrop:this.options.allowCancel?!0:"static"},this.options.modalOptions)),i.one("shown",function(){r.options.focusOk&&i.find(".btn.ok").focus(),r.options.content&&r.options.content.trigger&&r.options.content.trigger("shown",r),r.trigger("shown")});var o=s.count,u=e(".modal-backdrop:eq("+o+")"),a=parseInt(u.css("z-index"),10),f=parseInt(u.css("z-index"),10);return u.css("z-index",a+o),this.$el.css("z-index",f+o),this.options.allowCancel&&(u.one("click",function(){r.options.content&&r.options.content.trigger&&r.options.content.trigger("cancel",r),r.trigger("cancel")}),e(document).one("keyup.dismiss.modal",function(e){e.which==27&&r.trigger("cancel"),r.options.content&&r.options.content.trigger&&e.which==27&&r.options.content.trigger("shown",r)})),this.on("cancel",function(){r.close()}),s.count++,n&&r.on("ok",n),this},close:function(){var e=this,t=this.$el;if(this._preventClose){this._preventClose=!1;return}t.one("hidden",function(){e.remove(),e.options.content&&e.options.content.trigger&&e.options.content.trigger("hidden",e),e.trigger("hidden")}),t.modal("hide"),s.count--},preventClose:function(){this._preventClose=!0}},{count:0});typeof require=="function"&&typeof module!="undefined"&&exports&&(module.exports=s);if(typeof define=="function"&&define.amd)return define("backbone-bootstrap-modal",[],function(){n.BootstrapModal=s});n.BootstrapModal=s}(jQuery,_,Backbone),define("apps/commons/dialog/dialog_view",["app","text!apps/commons/dialog/templates/dialog_template.html","backbone-bootstrap-modal"],function(e,t){return e.module("Commons.Views",function(e,n,r,i,s,o){var u=r.View.extend({tagName:"p",render:function(){return this.$el.html(this.template),this}}),a=r.BootstrapModal.extend({animate:!0});e.confirm=function(e,n){n=n||"Confirm";var r=u.extend({template:e}),i=new r;i.render();var f=new a({content:i,title:n,template:o.template(t)}),l,c=s.Deferred();return f.on("ok",function(){c.resolve(!0)}),f.on("cancel",function(){c.resolve(!1)}),f.open(),c.promise()}}),e.Commons.Views}),define("util/util",function(){}),define("apps/channels/edit/edit_view",["app","text!apps/dashboard/show/templates/list_photos.html","util/lazyloaderhelper","apps/commons/dialog/dialog_view","util/util"],function(e,t,n,r){return e.module("ChannelsApp.Edit.View",function(e,n,i,s,o,u){e.ListPhoto=i.Marionette.ItemView.extend({template:Handlebars.compile(t),tagName:"li",events:{"click a":"photoClicked"},photoClicked:function(){var e=this;r.confirm("Are you sure you want to change the channel photo?","Change channel photo").then(function(t){t&&e.trigger("channel:assigne_photo",e.model)})}})}),e.ChannelsApp.Edit.View}),define("text!apps/channels/form/templates/form_layout_Template.html",[],function(){return'<script>	\n	<div id="form_show"></div>\n	<div id="alert-danger" class="alert-danger alert hide"></div>\n	<div id="alert-success" class="alert-success alert hide"></div>\n	<br/>\n	<button class="btn btn-default" id=\'commit\'>Submit</button> \n	<button class="btn btn-danger" id=\'delete\'>Delete</button>\n	<button class="btn btn-success" id=\'upload\'>Upload chat photo</button>\n	<button class="btn btn-info" id=\'assigne\'>Assign chat photo</button>\n</script>'}),define("backbone-forms",["jquery","underscore","backbone"],function(e,t,n){var r=n.View.extend({events:{submit:function(e){this.trigger("submit",e)}},initialize:function(e){var n=this;e=this.options=t.extend({submitButton:!1},e);var r=this.schema=function(){if(e.schema)return t.result(e,"schema");var r=e.model;return r&&r.schema?t.result(r,"schema"):n.schema?t.result(n,"schema"):{}}();t.extend(this,t.pick(e,"model","data","idPrefix","templateData"));var i=this.constructor;this.template=e.template||this.template||i.template,this.Fieldset=e.Fieldset||this.Fieldset||i.Fieldset,this.Field=e.Field||this.Field||i.Field,this.NestedField=e.NestedField||this.NestedField||i.NestedField;var s=this.selectedFields=e.fields||t.keys(r),o=this.fields={};t.each(s,function(e){var t=r[e];o[e]=this.createField(e,t)},this);var u=e.fieldsets||t.result(this,"fieldsets")||t.result(this.model,"fieldsets")||[s],a=this.fieldsets=[];t.each(u,function(e){this.fieldsets.push(this.createFieldset(e))},this)},createFieldset:function(e){var t={schema:e,fields:this.fields,legend:e.legend||null};return new this.Fieldset(t)},createField:function(e,t){var n={form:this,key:e,schema:t,idPrefix:this.idPrefix};this.model?n.model=this.model:this.data?n.value=this.data[e]:n.value=null;var r=new this.Field(n);return this.listenTo(r.editor,"all",this.handleEditorEvent),r},handleEditorEvent:function(e,n){var r=n.key+":"+e;this.trigger.call(this,r,this,n,Array.prototype.slice.call(arguments,2));switch(e){case"change":this.trigger("change",this);break;case"focus":this.hasFocus||this.trigger("focus",this);break;case"blur":if(this.hasFocus){var i=this;setTimeout(function(){var e=t.find(i.fields,function(e){return e.editor.hasFocus});e||i.trigger("blur",i)},0)}}},templateData:function(){var e=this.options;return{submitButton:e.submitButton}},render:function(){var e=this,r=this.fields,i=n.$,s=i(i.trim(this.template(t.result(this,"templateData"))));return s.find("[data-editors]").add(s).each(function(n,s){var o=i(s),u=o.attr("data-editors");if(t.isUndefined(u))return;var a=u=="*"?e.selectedFields||t.keys(r):u.split(",");t.each(a,function(e){var t=r[e];o.append(t.editor.render().el)})}),s.find("[data-fields]").add(s).each(function(n,s){var o=i(s),u=o.attr("data-fields");if(t.isUndefined(u))return;var a=u=="*"?e.selectedFields||t.keys(r):u.split(",");t.each(a,function(e){var t=r[e];o.append(t.render().el)})}),s.find("[data-fieldsets]").add(s).each(function(n,r){var s=i(r),o=s.attr("data-fieldsets");if(t.isUndefined(o))return;t.each(e.fieldsets,function(e){s.append(e.render().el)})}),this.setElement(s),s.addClass(this.className),this},validate:function(e){var n=this,r=this.fields,i=this.model,s={};e=e||{},t.each(r,function(e){var t=e.validate();t&&(s[e.key]=t)});if(!e.skipModelValidate&&i&&i.validate){var o=i.validate(this.getValue());if(o){var u=t.isObject(o)&&!t.isArray(o);u||(s._others=s._others||[],s._others.push(o)),u&&t.each(o,function(e,t){if(r[t]&&!s[t])r[t].setError(e),s[t]=e;else{s._others=s._others||[];var n={};n[t]=e,s._others.push(n)}})}}return t.isEmpty(s)?null:s},commit:function(e){e=e||{};var n={skipModelValidate:!e.validate},r=this.validate(n);if(r)return r;var i,s=t.extend({error:function(e,t){i=t}},e);this.model.set(this.getValue(),s);if(i)return i},getValue:function(e){if(e)return this.fields[e].getValue();var n={};return t.each(this.fields,function(e){n[e.key]=e.getValue()}),n},setValue:function(e,t){var n={};typeof e=="string"?n[e]=t:n=e;var r;for(r in this.schema)n[r]!==undefined&&this.fields[r].setValue(n[r])},getEditor:function(e){var t=this.fields[e];if(!t)throw new Error("Field not found: "+e);return t.editor},focus:function(){if(this.hasFocus)return;var e=this.fieldsets[0],t=e.getFieldAt(0);if(!t)return;t.editor.focus()},blur:function(){if(!this.hasFocus)return;var e=t.find(this.fields,function(e){return e.editor.hasFocus});e&&e.editor.blur()},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),n.View.prototype.trigger.apply(this,arguments)},remove:function(){return t.each(this.fieldsets,function(e){e.remove()}),t.each(this.fields,function(e){e.remove()}),n.View.prototype.remove.apply(this,arguments)}},{template:t.template('    <form>     <div data-fieldsets></div>      <% if (submitButton) { %>        <button type="submit"><%= submitButton %></button>      <% } %>    </form>  ',null,this.templateSettings),templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},editors:{}});return r.validators=function(){var e={};return e.errMessages={required:"Required",regexp:"Invalid",number:"Must be a number",email:"Invalid email address",url:"Invalid URL",match:t.template('Must match field "<%= field %>"',null,r.templateSettings)},e.required=function(e){return e=t.extend({type:"required",message:this.errMessages.required},e),function(r){e.value=r;var i={type:e.type,message:t.isFunction(e.message)?e.message(e):e.message};if(r===null||r===undefined||r===!1||r==="")return i}},e.regexp=function(e){if(!e.regexp)throw new Error('Missing required "regexp" option for "regexp" validator');return e=t.extend({type:"regexp",match:!0,message:this.errMessages.regexp},e),function(r){e.value=r;var i={type:e.type,message:t.isFunction(e.message)?e.message(e):e.message};if(r===null||r===undefined||r==="")return;"string"==typeof e.regexp&&(e.regexp=new RegExp(e.regexp,e.flags));if(e.match?!e.regexp.test(r):e.regexp.test(r))return i}},e.number=function(n){return n=t.extend({type:"number",message:this.errMessages.number,regexp:/^[0-9]*\.?[0-9]*?$/},n),e.regexp(n)},e.email=function(n){return n=t.extend({type:"email",message:this.errMessages.email,regexp:/^[\w\-]{1,}([\w\-\+.]{1,1}[\w\-]{1,}){0,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/},n),e.regexp(n)},e.url=function(n){return n=t.extend({type:"url",message:this.errMessages.url,regexp:/^(http|https):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i},n),e.regexp(n)},e.match=function(e){if(!e.field)throw new Error('Missing required "field" options for "match" validator');return e=t.extend({type:"match",message:this.errMessages.match},e),function(r,i){e.value=r;var s={type:e.type,message:t.isFunction(e.message)?e.message(e):e.message};if(r===null||r===undefined||r==="")return;if(r!==i[e.field])return s}},e}(),r.Fieldset=n.View.extend({initialize:function(e){e=e||{};var n=this.schema=this.createSchema(e.schema);this.fields=t.pick(e.fields,n.fields),this.template=e.template||n.template||this.template||this.constructor.template},createSchema:function(e){return t.isArray(e)&&(e={fields:e}),e.legend=e.legend||null,e},getFieldAt:function(e){var t=this.schema.fields[e];return this.fields[t]},templateData:function(){return this.schema},render:function(){var e=this.schema,r=this.fields,i=n.$,s=i(i.trim(this.template(t.result(this,"templateData"))));return s.find("[data-fields]").add(s).each(function(e,n){var s=i(n),o=s.attr("data-fields");if(t.isUndefined(o))return;t.each(r,function(e){s.append(e.render().el)})}),this.setElement(s),this},remove:function(){t.each(this.fields,function(e){e.remove()}),n.View.prototype.remove.call(this)}},{template:t.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ",null,r.templateSettings)}),r.Field=n.View.extend({initialize:function(e){e=e||{},t.extend(this,t.pick(e,"form","key","model","value","idPrefix"));var n=this.schema=this.createSchema(e.schema);this.template=e.template||n.template||this.template||this.constructor.template,this.errorClassName=e.errorClassName||this.errorClassName||this.constructor.errorClassName,this.editor=this.createEditor()},createSchema:function(e){return t.isString(e)&&(e={type:e}),e=t.extend({type:"Text",title:this.createTitle()},e),e.type=t.isString(e.type)?r.editors[e.type]:e.type,e},createEditor:function(){var e=t.extend(t.pick(this,"schema","form","key","model","value"),{id:this.createEditorId()}),n=this.schema.type;return new n(e)},createEditorId:function(){var e=this.idPrefix,n=this.key;return n=n.replace(/\./g,"_"),t.isString(e)||t.isNumber(e)?e+n:t.isNull(e)?n:this.model?this.model.cid+"_"+n:n},createTitle:function(){var e=this.key;return e=e.replace(/([A-Z])/g," $1"),e=e.replace(/^./,function(e){return e.toUpperCase()}),e},templateData:function(){var e=this.schema;return{help:e.help||"",title:e.title,fieldAttrs:e.fieldAttrs,editorAttrs:e.editorAttrs,key:this.key,editorId:this.editor.id}},render:function(){var e=this.schema,i=this.editor,s=n.$;if(e.type==r.editors.Hidden)return this.setElement(i.render().el);var o=s(s.trim(this.template(t.result(this,"templateData"))));return e.fieldClass&&o.addClass(e.fieldClass),e.fieldAttrs&&o.attr(e.fieldAttrs),o.find("[data-editor]").add(o).each(function(e,n){var r=s(n),o=r.attr("data-editor");if(t.isUndefined(o))return;r.append(i.render().el)}),this.setElement(o),this},validate:function(){var e=this.editor.validate();return e?this.setError(e.message):this.clearError(),e},setError:function(e){if(this.editor.hasNestedForm)return;this.$el.addClass(this.errorClassName),this.$("[data-error]").html(e)},clearError:function(){this.$el.removeClass(this.errorClassName),this.$("[data-error]").empty()},commit:function(){return this.editor.commit()},getValue:function(){return this.editor.getValue()},setValue:function(e){this.editor.setValue(e)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),n.View.prototype.remove.call(this)}},{template:t.template('    <div>      <label for="<%= editorId %>"><%= title %></label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ',null,r.templateSettings),errorClassName:"error"}),r.NestedField=r.Field.extend({template:t.template("    <div>      <span data-editor></span>      <% if (help) { %>        <div><%= help %></div>      <% } %>      <div data-error></div>    </div>  ",null,r.templateSettings)}),r.Editor=r.editors.Base=n.View.extend({defaultValue:null,hasFocus:!1,initialize:function(e){var e=e||{};if(e.model){if(!e.key)throw new Error("Missing option: 'key'");this.model=e.model,this.value=this.model.get(e.key)}else e.value!==undefined&&(this.value=e.value);this.value===undefined&&(this.value=this.defaultValue),t.extend(this,t.pick(e,"key","form"));var n=this.schema=e.schema||{};this.validators=e.validators||n.validators,this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),n.editorClass&&this.$el.addClass(n.editorClass),n.editorAttrs&&this.$el.attr(n.editorAttrs)},getName:function(){var e=this.key||"";return e.replace(/\./g,"_")},getValue:function(){return this.value},setValue:function(e){this.value=e},focus:function(){throw new Error("Not implemented")},blur:function(){throw new Error("Not implemented")},commit:function(e){var t=this.validate();if(t)return t;this.listenTo(this.model,"invalid",function(e,n){t=n}),this.model.set(this.key,this.getValue(),e);if(t)return t},validate:function(){var e=this.$el,n=null,r=this.getValue(),i=this.form?this.form.getValue():{},s=this.validators,o=this.getValidator;return s&&t.every(s,function(e){return n=o(e)(r,i),n?!1:!0}),n},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),n.View.prototype.trigger.apply(this,arguments)},getValidator:function(e){var n=r.validators;if(t.isRegExp(e))return n.regexp({regexp:e});if(t.isString(e)){if(!n[e])throw new Error('Validator "'+e+'" not found');return n[e]()}if(t.isFunction(e))return e;if(t.isObject(e)&&e.type){var i=e;return n[i.type](i)}throw new Error("Invalid validator: "+e)}}),r.editors.Text=r.Editor.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(e){var t=this;setTimeout(function(){t.determineChange()},0)},select:function(e){this.trigger("select",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){r.editors.Base.prototype.initialize.call(this,e);var t=this.schema,n="text";t&&t.editorAttrs&&t.editorAttrs.type&&(n=t.editorAttrs.type),t&&t.dataType&&(n=t.dataType),this.$el.attr("type",n)},render:function(){return this.setValue(this.value),this},determineChange:function(e){var t=this.$el.val(),n=t!==this.previousValue;n&&(this.previousValue=t,this.trigger("change",this))},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},select:function(){this.$el.select()}}),r.editors.TextArea=r.editors.Text.extend({tagName:"textarea",initialize:function(e){r.editors.Base.prototype.initialize.call(this,e)}}),r.editors.Password=r.editors.Text.extend({initialize:function(e){r.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","password")}}),r.editors.Number=r.editors.Text.extend({defaultValue:0,events:t.extend({},r.editors.Text.prototype.events,{keypress:"onKeyPress",change:"onKeyPress"}),initialize:function(e){r.editors.Text.prototype.initialize.call(this,e);var t=this.schema;this.$el.attr("type","number"),(!t||!t.editorAttrs||!t.editorAttrs.step)&&this.$el.attr("step","any")},onKeyPress:function(e){var t=this,n=function(){setTimeout(function(){t.determineChange()},0)};if(e.charCode===0){n();return}var r=this.$el.val();e.charCode!=undefined&&(r+=String.fromCharCode(e.charCode));var i=/^[0-9]*\.?[0-9]*?$/.test(r);i?n():e.preventDefault()},getValue:function(){var e=this.$el.val();return e===""?null:parseFloat(e,10)},setValue:function(e){e=function(){return t.isNumber(e)?e:t.isString(e)&&e!==""?parseFloat(e,10):null}(),t.isNaN(e)&&(e=null),r.editors.Text.prototype.setValue.call(this,e)}}),r.editors.Hidden=r.editors.Text.extend({defaultValue:"",initialize:function(e){r.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","hidden")},focus:function(){},blur:function(){}}),r.editors.Checkbox=r.editors.Base.extend({defaultValue:!1,tagName:"input",events:{click:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){r.editors.Base.prototype.initialize.call(this,e),this.$el.attr("type","checkbox")},render:function(){return this.setValue(this.value),this},getValue:function(){return this.$el.prop("checked")},setValue:function(e){e?this.$el.prop("checked",!0):this.$el.prop("checked",!1)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()}}),r.editors.Select=r.editors.Base.extend({tagName:"select",previousValue:"",events:{keyup:"determineChange",keypress:function(e){var t=this;setTimeout(function(){t.determineChange()},0)},change:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){r.editors.Base.prototype.initialize.call(this,e);if(!this.schema||!this.schema.options)throw new Error("Missing required 'schema.options'")},render:function(){return this.setOptions(this.schema.options),this},setOptions:function(e){var r=this;if(e instanceof n.Collection){var i=e;i.length>0?this.renderOptions(e):i.fetch({success:function(t){r.renderOptions(e)}})}else t.isFunction(e)?e(function(e){r.renderOptions(e)},r):this.renderOptions(e)},renderOptions:function(e){var t=this.$el,n;n=this._getOptionsHtml(e),t.html(n),this.setValue(this.value)},_getOptionsHtml:function(e){var r;if(t.isString(e))r=e;else if(t.isArray(e))r=this._arrayToHtml(e);else if(e instanceof n.Collection)r=this._collectionToHtml(e);else if(t.isFunction(e)){var i;e(function(e){i=e},this),r=this._getOptionsHtml(i)}else r=this._objectToHtml(e);return r},determineChange:function(e){var t=this.getValue(),n=t!==this.previousValue;n&&(this.previousValue=t,this.trigger("change",this))},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},_collectionToHtml:function(e){var t=[];e.each(function(e){t.push({val:e.id,label:e.toString()})});var n=this._arrayToHtml(t);return n},_objectToHtml:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({val:n,label:e[n]});var r=this._arrayToHtml(t);return r},_arrayToHtml:function(e){var n=[];return t.each(e,function(e){if(t.isObject(e))if(e.group)n.push('<optgroup label="'+e.group+'">'),n.push(this._getOptionsHtml(e.options)),n.push("</optgroup>");else{var r=e.val||e.val===0?e.val:"";n.push('<option value="'+r+'">'+e.label+"</option>")}else n.push("<option>"+e+"</option>")},this),n.join("")}}),r.editors.Radio=r.editors.Select.extend({tagName:"ul",events:{"change input[type=radio]":function(){this.trigger("change",this)},"focus input[type=radio]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=radio]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=radio]:focus")[0])return;e.trigger("blur",e)},0)}},getTemplate:function(){return this.schema.template||this.constructor.template},getValue:function(){return this.$("input[type=radio]:checked").val()},setValue:function(e){this.$("input[type=radio]").val([e])},focus:function(){if(this.hasFocus)return;var e=this.$("input[type=radio]:checked");if(e[0]){e.focus();return}this.$("input[type=radio]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=radio]:focus").blur()},_arrayToHtml:function(e){var n=this,r=this.getTemplate(),i=n.getName(),s=n.id,o=t.map(e,function(e,n){var r={name:i,id:s+"-"+n};return t.isObject(e)?(r.value=e.val||e.val===0?e.val:"",r.label=e.label):(r.value=e,r.label=e),r});return r({items:o})}},{template:t.template('    <% _.each(items, function(item) { %>      <li>        <input type="radio" name="<%= item.name %>" value="<%= item.value %>" id="<%= item.id %>" />        <label for="<%= item.id %>"><%= item.label %></label>      </li>    <% }); %>  ',null,r.templateSettings)}),r.editors.Checkboxes=r.editors.Select.extend({tagName:"ul",groupNumber:0,events:{"click input[type=checkbox]":function(){this.trigger("change",this)},"focus input[type=checkbox]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=checkbox]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=checkbox]:focus")[0])return;e.trigger("blur",e)},0)}},getValue:function(){var t=[];return this.$("input[type=checkbox]:checked").each(function(){t.push(e(this).val())}),t},setValue:function(e){t.isArray(e)||(e=[e]),this.$("input[type=checkbox]").val(e)},focus:function(){if(this.hasFocus)return;this.$("input[type=checkbox]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=checkbox]:focus").blur()},_arrayToHtml:function(e){var n=[],r=this;return t.each(e,function(e,i){var s="<li>",o=!0;if(t.isObject(e))if(e.group){var u=r.id;r.id+="-"+r.groupNumber++,s='<fieldset class="group"> <legend>'+e.group+"</legend>",s+=r._arrayToHtml(e.options),s+="</fieldset>",r.id=u,o=!1}else{var a=e.val||e.val===0?e.val:"";s+='<input type="checkbox" name="'+r.getName()+'" value="'+a+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e.label+"</label>"}else s+='<input type="checkbox" name="'+r.getName()+'" value="'+e+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e+"</label>";o&&(s+="</li>"),n.push(s)}),n.join("")}}),r.editors.Object=r.editors.Base.extend({hasNestedForm:!0,initialize:function(e){this.value={},r.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw new Error('Missing required option "form"');if(!this.schema.subSchema)throw new Error("Missing required 'schema.subSchema' option for Object editor")},render:function(){var e=this.form.constructor;return this.nestedForm=new e({schema:this.schema.subSchema,data:this.value,idPrefix:this.id+"_",Field:e.NestedField}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){return this.nestedForm?this.nestedForm.getValue():this.value},setValue:function(e){this.value=e,this.render()},focus:function(){if(this.hasFocus)return;this.nestedForm.focus()},blur:function(){if(!this.hasFocus)return;this.nestedForm.blur()},remove:function(){this.nestedForm.remove(),n.View.prototype.remove.call(this)},validate:function(){return this.nestedForm.validate()},_observeFormEvents:function(){if(!this.nestedForm)return;this.nestedForm.on("all",function(){var e=t.toArray(arguments);e[1]=this,this.trigger.apply(this,e)},this)}}),r.editors.NestedModel=r.editors.Object.extend({initialize:function(e){r.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw new Error('Missing required option "form"');if(!e.schema.model)throw new Error('Missing required "schema.model" option for NestedModel editor')},render:function(){var e=this.form.constructor,t=this.value||{},n=this.key,r=this.schema.model,i=t.constructor===r?t:new r(t);return this.nestedForm=new e({model:i,idPrefix:this.id+"_",fieldTemplate:"nestedField"}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},commit:function(){var e=this.nestedForm.commit();return e?(this.$el.addClass("error"),e):r.editors.Object.prototype.commit.call(this)}}),r.editors.Date=r.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},r.editors.Base.prototype.initialize.call(this,e);var n=r.editors.Date,i=new Date;this.options=t.extend({monthNames:n.monthNames,showMonthNames:n.showMonthNames},e),this.schema=t.extend({yearStart:i.getFullYear()-100,yearEnd:i.getFullYear()},e.schema||{}),this.value&&!t.isDate(this.value)&&(this.value=new Date(this.value));if(!this.value){var s=new Date;s.setSeconds(0),s.setMilliseconds(0),this.value=s}this.template=e.template||this.constructor.template},render:function(){var e=this.options,r=this.schema,i=n.$,s=t.map(t.range(1,32),function(e){return'<option value="'+e+'">'+e+"</option>"}),o=t.map(t.range(0,12),function(t){var n=e.showMonthNames?e.monthNames[t]:t+1;return'<option value="'+t+'">'+n+"</option>"}),u=r.yearStart<r.yearEnd?t.range(r.yearStart,r.yearEnd+1):t.range(r.yearStart,r.yearEnd-1,-1),a=t.map(u,function(e){return'<option value="'+e+'">'+e+"</option>"}),f=i(i.trim(this.template({dates:s.join(""),months:o.join(""),years:a.join("")})));return this.$date=f.find('[data-type="date"]'),this.$month=f.find('[data-type="month"]'),this.$year=f.find('[data-type="year"]'),this.$hidden=i('<input type="hidden" name="'+this.key+'" />'),f.append(this.$hidden),this.setValue(this.value),this.setElement(f),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.$year.val(),t=this.$month.val(),n=this.$date.val();return!e||!t||!n?null:new Date(e,t,n)},setValue:function(e){this.$date.val(e.getDate()),this.$month.val(e.getMonth()),this.$year.val(e.getFullYear()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();t.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)}},{template:t.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ',null,r.templateSettings),showMonthNames:!0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}),r.editors.DateTime=r.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},r.editors.Base.prototype.initialize.call(this,e),this.options=t.extend({DateEditor:r.editors.DateTime.DateEditor},e),this.schema=t.extend({minsInterval:15},e.schema||{}),this.dateEditor=new this.options.DateEditor(e),this.value=this.dateEditor.value,this.template=e.template||this.constructor.template},render:function(){function e(e){return e<10?"0"+e:e}var r=this.schema,i=n.$,s=t.map(t.range(0,24),function(t){return'<option value="'+t+'">'+e(t)+"</option>"}),o=t.map(t.range(0,60,r.minsInterval),function(t){return'<option value="'+t+'">'+e(t)+"</option>"}),u=i(i.trim(this.template({hours:s.join(),mins:o.join()})));return u.find("[data-date]").append(this.dateEditor.render().el),this.$hour=u.find('select[data-type="hour"]'),this.$min=u.find('select[data-type="min"]'),this.$hidden=u.find('input[type="hidden"]'),this.setValue(this.value),this.setElement(u),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.dateEditor.getValue(),t=this.$hour.val(),n=this.$min.val();return!e||!t||!n?null:(e.setHours(t),e.setMinutes(n),e)},setValue:function(e){t.isDate(e)||(e=new Date(e)),this.dateEditor.setValue(e),this.$hour.val(e.getHours()),this.$min.val(e.getMinutes()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();t.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)},remove:function(){this.dateEditor.remove(),r.editors.Base.prototype.remove.call(this)}},{template:t.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ',null,r.templateSettings),DateEditor:r.editors.Date}),r.VERSION="0.14.0",n.Form=r,r}),define("backbone-bootstrap",["jquery","underscore","backbone","backbone-forms"],function(e,t,n){var r=n.Form;r.template=t.template('    <form class="form-horizontal" role="form">      <div data-fieldsets></div>      <% if (submitButton) { %>        <button type="submit" class="btn"><%= submitButton %></button>      <% } %>    </form>  '),r.Fieldset.template=t.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  "),r.Field.template=t.template('    <div class="form-group field-<%= key %>">      <label class="col-sm-2 control-label" for="<%= editorId %>"><%= title %></label>      <div class="col-sm-10">        <span data-editor></span>        <p class="help-block" data-error></p>        <p class="help-block"><%= help %></p>      </div>    </div>  '),r.NestedField.template=t.template('    <div class="field-<%= key %>">      <div title="<%= title %>" class="input-xlarge">        <span data-editor></span>        <div class="help-inline" data-error></div>      </div>      <div class="help-block"><%= help %></div>    </div>  '),r.editors.Base.prototype.className="form-control",r.Field.errorClassName="has-error",r.editors.List&&(r.editors.List.template=t.template('      <div class="bbf-list">        <ul class="list-unstyled clearfix" data-items></ul>        <button type="button" class="btn bbf-add" data-action="add">Add</button>      </div>    '),r.editors.List.Item.template=t.template('      <li class="clearfix">        <div class="pull-left" data-editor></div>        <button type="button" class="btn bbf-del" data-action="remove">&times;</button>      </li>    '),r.editors.List.Object.template=r.editors.List.NestedModel.template=t.template('      <div class="bbf-list-modal"><%= summary %></div>    '))}),define("text!util/languages_min.js",[],function(){return'{\n    "af":{\n        "name":"Afrikaans",\n        "nativeName":"Afrikaans"\n    },\n    "es":{\n        "name":"Spanish; Castilian",\n        "nativeName":"español, castellano"\n    },\n    "en":{\n        "name":"English",\n        "nativeName":"English"\n    },\n    "de":{\n        "name":"German",\n        "nativeName":"Deutsch"\n    },\n    "fr":{\n        "name":"French",\n        "nativeName":"français, langue française"\n    },\n    "id":{\n        "name":"Indonesian",\n        "nativeName":"Bahasa Indonesia"\n    },\n    "it":{\n        "name":"Italian",\n        "nativeName":"Italiano"\n    },\n    "nl":{\n        "name":"Dutch",\n        "nativeName":"Nederlands, Vlaams"\n    },\n    "qu":{\n        "name":"Quechua",\n        "nativeName":"Runa Simi, Kichwa"\n    },\n    "pt":{\n        "name":"Portuguese",\n        "nativeName":"Português"\n    }\n}'}),define("text!apps/channels/form/templates/form_view_template.html",[],function(){return'<form>\n   <h2>Create channel</h2>\n\n   <h3>Channel type</h3>\n   <div data-fields="channel_type"></div>\n\n   <h3>Name</h3>\n   <div data-fields="name"></div>\n   \n   <h3>Description</h3>\n   <div data-fields="description"></div>\n\n   <h3>IRC Channel</h3>\n   <div data-fields="irc_channel"></div>\n\n   <h3>Language</h3>\n   <div data-fields="language"></div>\n\n</form>'}),define("text!apps/channels/form/templates/form_view_scripts.html",[],function(){return'<script>\n	<script>\n		$(".field-modes").on("keyup", "input[type=text]", function(e){\n			\n			//input where I write\n			var value_input_where_write = $(this).val();\n			//name of the mode\n			var name_input_on_click = $(this).attr("name");\n			var parent = $(this).parent();\n			var new_value = \'{"mode":"\'+name_input_on_click.charAt(0).toLowerCase()+\'","value":"\'+value_input_where_write+\'"}\';\n\n			//override new value\n			parent.children("input[type=checkbox]").val(new_value);\n\n		});\n		$(".field-modes div").hide();\n		$(".field-modes").append(\'<div class="col-sm-10 show_modes"><i class="fa fa-angle-double-down"></i> Show Modes Irc</div>\');\n		$(".show_modes").on("click", function(e){\n			$(".field-modes div").show();\n			$(".show_modes").hide();\n		});\n	</script>\n</script>'}),define("apps/channels/form/formViewSeparateLayoutAndView",["app","text!apps/channels/form/templates/form_layout_Template.html","backbone-bootstrap","backbone-forms","text!util/languages_min.js","text!apps/channels/form/templates/form_view_template.html","text!apps/channels/form/templates/form_view_scripts.html","util/util"],function(e,t,n,r,i,s,o){return e.module("ChannelsApp.Form",function(e,n,r,u,a,f){function l(e,t,n){a(t).hide(),a(e).html(""),a(e).removeClass("hide"),a(e).show(),a(e).html(n)}e.Layout=u.Layout.extend({template:t,regions:{form_Region:"#form_show",alert_danger_Region:"#alert-danger",alert_success_Region:"#alert-success"},triggers:{"click #upload":"upload","click #assigne":"assigne"},events:{"click #commit":"formCommit","click #delete":"deleteClick"},initialize:function(e){this.type=e.type,this.form=e.form,this.model.on("sync",this.onSync,this),this.model.on("error",this.onError,this),this.model.on("destroy",this.onDestroy,this)},onError:function(e,t,n){var r=this,i="",s;if(t.responseJSON!==undefined)s=t.responseJSON;else try{s=JSON.parse(t.responseText)}catch(o){s={code:32,errors:"An error has ocurred. Please try it later"}}s.code===32||s.code===60?i=s.errors:a.each(s.errors,function(e,t){i+=e+" : "+t.message+"\n"}),l(this.regions.alert_danger_Region,this.regions.alert_success_Region,i)},onDestroy:function(e,t,n){r.history.navigate("rooms/",!0)},onClose:function(){this.model.off()},onRender:function(){a(this.alert_success_Region.el).removeClass("hide"),a(this.alert_danger_Region.el).hide()},formCommit:function(){var e=this;a(this.alert_success_Region.el).hide(),a(this.alert_danger_Region.el).hide();var t=this.form.commit({validate:!0}),r=this.form.getValue();if(typeof t=="undefined"){var i=this.model.get("modes"),s=a.trim(i),o='{"modes": ['+s+"]}";try{var u=JSON.parse(o);this.model.set({modes:u.modes})}catch(f){}this.model.save({description:r.description},{patch:!0,success:function(t){l(e.regions.alert_success_Region,e.regions.alert_danger_Region,"Data sent successfully"),n.User.get("channels").add(e.model),e.type=="create"&&n.trigger("photos:upload",{message:"Upload photo to channel: "+e.model.get("name"),done:function(t,r){e.model.changePhoto(r.id),n.trigger("dashboard:channels_pendings_to_moderate"),n.sendEventAnalytics("event","Rooms","CreateRoom")}})}})}},deleteClick:function(){var e=this;require(["apps/commons/dialog/dialog_view"],function(t){t.confirm("Are you sure you want to delete this channel?","Delete channel").then(function(t){t&&e.model.destroy()})})}}),e.FormViewScript=u.ItemView.extend({template:o}),e.FormView=u.ItemView.extend({template:s,type:null,initialize:function(e){this.type=e.type,this.form=e.form},onRender:function(){var e=this;return this.type=="edit"&&(typeof this.model.attributes.channel_type!="undefined"&&(this.form.fields.channel_type.editor.value=this.model.attributes.channel_type.name),this.form.fields.channel_type.editor.$el.attr("disabled",!0),this.form.fields.name.editor.$el.attr("disabled",!0),this.form.fields.irc_channel.editor.$el.attr("disabled",!0)),a(this.el).empty().append(this.form.render().el),this.form.on("name:change",function(t,n){var r=slug(n.previousValue);e.form.setValue({irc_channel:r})}),this},onShow:function(){a(this.el).append((new e.FormViewScript).render().el);var t=JSON.parse(i);a("select[name=language]").find("option").remove().end(),a.each(t,function(e,t){a("select[name=language]").append("<option value="+e+">"+t.name+"</option>")}),this.type=="edit"||this.model.get("language")?a('select[name=language] option[value="'+this.model.get("language")+'"]').prop("selected",!0):a('select[name=language] option:contains("English")').prop("selected",!0),a.ajax({dataType:"json",url:window.api_endpoint+"/api/channel/modes",success:function(e){a("ul[name=modes]").empty(),f.each(e,function(e,t){var n="<li>";n+='<input type="checkbox" id="c10_modes-'+t+'" value=\'{"mode":"'+e.name.charAt(0).toLowerCase()+'","value":""}\' name="modes">',n+='<label for="c10_modes-'+t+'">'+e.name+"</label>",e.is_value_required&&(n+='<input type="text" name="'+e.name+'"/>'),n+="</li>",a("ul[name=modes]").append(n)})},error:function(e){}})}})}),e.ChannelsApp.Form}),define("text!apps/photos/list/templates/list_container.html",[],function(){return'<script>\n<h2>Photos</h2>\n<div class="row-fluid">\n    <ul class="ace-thumbnails">\n    </ul>\n</div>\n</script>'}),define("text!apps/photos/list/templates/list_photos.html",[],function(){return'<a class="details-link" data-rel="colorbox" class="cboxElement">\n	<div style="width:150px;height:150px;" >\n        <img class="lazy" data-original="{{path_medium}}">\n    </div>\n</a>\n{{#edit}}\n<div class="tools tools-top">\n\n	<a href="#">\n		<i class="fa fa-pencil"></i>\n	</a>\n\n	<a href="#">\n		<i class="fa fa-trash-o red"></i>\n	</a>\n</div>\n{{/edit}}\n\n'}),define("apps/photos/list/list_item",["app","text!apps/photos/list/templates/list_photos.html","handlebars"],function(e,t,n){return e.module("PhotosApp.Show.View",function(e,r,i,s,o,u){e.ListItem=i.Marionette.CollectionView.extend({el:".ace-thumbnails",itemView:t,events:{"click .details-link":"photoClicked"},initialize:function(){var e=!1;this.model.attributes.participant.id==window.user_id&&(e=!0),u.extend(this.model.attributes,{edit:e})},render:function(){var e=n.compile(t,this.model.attributes);this.$el.append(e(this.model.attributes))},photoClicked:function(){}})}),e.PhotosApp.Show.View}),define("text!apps/photos/list/templates/empty_view.html",[],function(){return"<p>This user has no photos.</p>"}),define("apps/photos/list/empty_view",["app","text!apps/photos/list/templates/empty_view.html","handlebars"],function(e,t,n){return e.module("PhotosApp.List.Empty.View",function(e,r,i,s,o,u){e.EmptyView=s.View.extend({template:t,render:function(){var e=n.compile(t);this.$el.append(e())}})}),e.PhotosApp.List.Empty.View}),define("apps/photos/list/list_view",["app","text!apps/photos/list/templates/list_container.html","text!apps/photos/list/templates/list_photos.html","apps/photos/list/list_item","handlebars","apps/photos/list/empty_view","util/lazyloaderhelper"],function(e,t,n,r,i,s,o){return e.module("PhotosApp.Show.View",function(e,u,a,f,l,c){var h=a.Marionette.ItemView.extend({template:i.compile(n),tagName:"li",triggers:{"click .details-link":"photo:clicked"}});e.ListarPhotos=a.Marionette.CompositeView.extend({emptyView:s.EmptyView,itemView:h,itemViewContainer:"ul",template:t,initialize:function(){var e=this;o(this),this.on("itemview:photo:clicked",function(t){e.trigger("photo:clicked",t.model)})}}),e.ListPhotos=a.Marionette.CollectionView.extend({itemView:r.ListItem,emptyView:s.EmptyView,render:function(){var e=i.compile(t);this.$el.append(e)}})}),e.PhotosApp.Show.View}),define("text!apps/commons/list/templates/composite.html",[],function(){return"<script>\n<span>\n</span>\n</script>"}),define("text!apps/commons/list/templates/itemViewTemplate.html",[],function(){return'<script>\n	<a href="/users/<%= username_canonical %>-<%= id %>" data-rel="colorbox" class="cboxElement">\n		<img width=<%= sizeImage.width %> height=<%= sizeImage.height %> style="border: 2px solid #FFF; border-radius: 4px 4px 4px 4px; max-height:150px; max-width:180px;" <%=src_or_data()%>"<% if ((typeof(profile) != "undefined") && (typeof(profile.profile_photo) != "undefined")) { %>\n								<%= profile.profile_photo.path_small %>\n							<% } else { %>\n								<%= window.default_user_image_icon %>\n							<% } %>" title="<%= username %>">\n	</a>\n</script>'}),define("text!apps/commons/list/templates/empty.html",[],function(){return"<p>There are none.</p>"}),define("apps/commons/list/emptyView",["app","text!apps/commons/list/templates/empty.html","handlebars"],function(e,t,n){return e.module("Commons.List.Empty.View",function(e,r,i,s,o,u){e.EmptyView=s.View.extend({template:t,render:function(){var e=n.compile(t);this.$el.append(e())}})}),e.Commons.List.Empty.View}),define("text!apps/commons/list/templates/loading.html",[],function(){return'<script>\n<p><%= message %></p>\n<div id="spinner"></div>\n</script>'}),function(e,t){typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("spin",t):e.Spinner=t()}(this,function(){function r(e,t){var n=document.createElement(e||"div"),r;for(r in t)n[r]=t[r];return n}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,r,i,o){var u=["opacity",r,~~(e*100),i,o].join("-"),a=.01+i/o*100,f=Math.max(1-(1-e)/r*(100-a),e),l=n.substring(0,n.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return t[u]||(s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+r)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length),t[u]=1),u}function u(t,n){var r=t.style,i,s;if(r[n]!==undefined)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(s=0;s<e.length;s++){i=e[s]+n;if(r[i]!==undefined)return i}}function a(e,t){for(var n in t)e.style[u(e,n)||n]=t[n];return e}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]===undefined&&(e[r]=n[r])}return e}function l(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function h(e){if(typeof this=="undefined")return new h(e);this.opts=f(e||{},h.defaults,c)}function p(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}s.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:s+" "+s,coordorigin:-r+" "+ -r}),{width:s,height:s})}function c(t,s,u){i(f,i(a(o(),{rotation:360/n.lines*t+"deg",left:~~s}),i(a(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:u}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,s=2*r,u=-(n.width+n.length)*2+"px",f=a(o(),{position:"absolute",top:u,left:u}),l;if(n.shadow)for(l=1;l<=n.lines;l++)c(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)c(l);return i(t,f)},h.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var e=["webkit","Moz","ms","O"],t={},n,s=function(){var e=r("style",{type:"text/css"});return i(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),c={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(e){this.stop();var t=this,i=t.opts,s=t.el=a(r(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),o=i.radius+i.length+i.width,u,f;e&&(e.insertBefore(s,e.firstChild||null),f=l(e),u=l(s),a(s,{left:(i.left=="auto"?f.x-u.x+(e.offsetWidth>>1):parseInt(i.left,10)+o)+"px",top:(i.top=="auto"?f.y-u.y+(e.offsetHeight>>1):parseInt(i.top,10)+o)+"px"})),s.setAttribute("role","progressbar"),t.lines(s,t.opts);if(!n){var c=0,h=(i.lines-1)*(1-i.direction)/2,p,d=i.fps,v=d/i.speed,m=(1-i.opacity)/(v*i.trail/100),g=v/i.lines;(function y(){c++;for(var e=0;e<i.lines;e++)p=Math.max(1-(c+(i.lines-e)*g)%v*m,i.opacity),t.opacity(s,e*i.direction+h,p,i);t.timeout=t.el&&setTimeout(y,~~(1e3/d))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function l(e,n){return a(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*s+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var s=0,u=(t.lines-1)*(1-t.direction)/2,f;for(;s<t.lines;s++)f=a(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&o(t.opacity,t.trail,u+s*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&i(f,a(l("#000","0 0 4px #000"),{top:"2px"})),i(e,i(f,l(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var d=a(r("group"),{behavior:"url(#default#VML)"});return!u(d,"transform")&&d.adj?p():n=u(d,"animation"),h}),function(e){if(typeof exports=="object")e(require("jquery"),require("spin"));else if(typeof define=="function"&&define.amd)define("spin.jquery",["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(n,r){return this.each(function(){var i=e(this),s=i.data();s.spinner&&(s.spinner.stop(),delete s.spinner),n!==!1&&(n=e.extend({color:r||i.css("color")},e.fn.spin.presets[n]||n),s.spinner=(new t(n)).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),define("apps/commons/list/listView",["app","text!apps/commons/list/templates/composite.html","text!apps/commons/list/templates/itemViewTemplate.html","apps/commons/list/emptyView","text!apps/commons/list/templates/loading.html","util/lazyloaderhelper","spin.jquery"],function(e,t,n,r,i,s){return e.module("Commons.List",function(e,o,u,a,f,l){var c=a.ItemView.extend({tagName:'li class="col-xs-3"',template:n,initialize:function(e){this.tagName=this.options.tagName,this.delegateEventsToParentView(),e.lazy&&s(this)},templateHelpers:function(){var e=this;return{src_or_data:function(){return e.options.lazy?'class="lazy" data-original=':"src="}}},serializeData:function(){var e=function(t){var n={};return l.each(t.attributes,function(t,r){l.isFunction(t.toJSON)?n[r]=e(t):n[r]=t}),n},t=e(this.model);return l.extend(t,{sizeImage:this.options.sizeImage}),t},delegateEventsToParentView:function(){var e=/^(\S+)\s*(.*)$/;if(this.options.toParentEvents){var t=this.options.toParentEvents;for(var n in t){var r=t[n],i=n.match(e),s=i[1],o=i[2];this.delegateEventToParentView(s,o,r)}}},delegateEventToParentView:function(e,t,n){var r=this.options.parentView,i=l.bind(r[n],r,this);t===""?this.$el.on(e,i):this.$el.on(e,t,i)}});e.CompositeView=u.Marionette.CompositeView.extend({tagName:'ul class="row list-unstyled"',itemView:c,emptyView:r.EmptyView,template:t,itemViewOptions:function(e,t){var n={template:this.options.templateItemView};return this.options.tagNameItemView&&l.extend(n,{tagName:this.options.tagNameItemView}),this.options.sizeImage&&(f.isPlainObject(this.options.sizeImage)?l.extend(n,{sizeImage:this.options.sizeImage}):l.extend(n,{sizeImage:{width:this.options.sizeImage,height:this.options.sizeImage}})),this.subviewEvents&&l.extend(n,{toParentEvents:this.subviewEvents,parentView:this}),this.options.lazy&&l.extend(n,{lazy:!0}),this.options.perserveOriginalTemplate&&l.extend(n,{perserveOriginalTemplate:!0}),n}}),e.Loading=a.ItemView.extend({template:i,initialize:function(e){var t=e||{};this.title=t.title||"Loading Data",this.message=t.message||"Please wait, data is loading."},serializeData:function(){return{title:this.title,message:this.message}},onShow:function(){var e={lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"30px",left:"auto"};f("#spinner").spin(e)}})}),e.Commons.List}),define("text!apps/dashboard/show/templates/Layout_Template.html",[],function(){return'<script type="text/javascript">\n<div class="pull-center alert alert-success no-margin">\n	<button data-dismiss="alert" class="close" type="button">\n		<i class="fa fa-times"></i>\n	</button>\n\n	<i class="icon-umbrella bigger-120 blue"></i>\n	Welcome your dashboard. Here you can modify your public data, and see info about your channels.\n</div>\n<br>\n<div class="col-xs-12">\n	<div class="user-profile row" id="user-profile-1">\n		<div class="col-xs-12 col-sm-3 center">\n			<span class="profile-picture">\n			<ul class="nav">\n				<li>\n					<a data-toggle="dropdown" class="dropdown-toggle">\n						<%if ((typeof(profile) != \'undefined\') && profile.get(\'profile_photo\')){ %>\n							<img src="<%=profile.get(\'profile_photo\').get(\'path_small\')%>" alt="User\'s Avatar" class="editable img-responsive editable-click editable-empty" id="avatar"></img>\n\n						<% }else{ %>\n							<img src="<%= window.default_user_image_small %>" alt="User\'s Avatar" class="editable img-responsive editable-click editable-empty" id="avatar"></img>\n						<%}%>\n					</a>\n					<ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">\n						<li>\n							<a href="me/dashboard/change-profile-photo">Upload profile photo</a>\n						</li>\n						<li>\n							<a href="me/dashboard/choose-profile-photo">Choose from your photos</a>\n						</li>\n					</ul>\n				</li>\n			</ul>\n			</span>\n\n			<div class="space-4"></div>\n\n			<div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right">\n				<div class="inline position-relative">\n					<a data-toggle="dropdown" class="user-title-label dropdown-toggle" href="#">\n						<i class="icon-circle light-green middle"></i>\n						&nbsp;\n						<span class="white"><%= username %></span>\n					</a>\n\n					<ul class="align-left dropdown-menu dropdown-caret dropdown-lighter">\n						<li class="dropdown-header"> Change Status </li>\n\n						<li>\n							<a href="#">\n								<i class="icon-circle green"></i>\n								&nbsp;\n								<span class="green">Available</span>\n							</a>\n						</li>\n\n						<li>\n							<a href="#">\n								<i class="icon-circle red"></i>\n								&nbsp;\n								<span class="red">Busy</span>\n							</a>\n						</li>\n\n						<li>\n							<a href="#">\n								<i class="icon-circle grey"></i>\n								&nbsp;\n								<span class="grey">Invisible</span>\n							</a>\n						</li>\n					</ul>\n				</div>\n			</div>\n			\n\n			<div class="space-6"></div>\n\n			<div class="profile-contact-info">\n				<div class="profile-contact-links align-left">\n					<a href="#" class="btn btn-link" id="go_me_edit">\n						<i class="fa fa-edit bigger-120 green"></i>\n						Edit profile\n					</a>\n\n					<a href="/me/change-password" class="btn btn-link">\n						<i class="fa fa-cog bigger-120 green"></i>\n						Change password\n					</a>\n\n					<a class="btn btn-link" id="create_channel_from_dashboard">\n						<i class="fa fa-envelope bigger-120 pink"></i>\n						Create a channel\n					</a>\n				</div>\n			</div>\n\n		</div>\n\n		<div class="col-xs-12 col-sm-9">\n			<div class="center">\n				<% if (typeof(profile) != \'undefined\') {%>\n				<span class="btn btn-app btn-sm btn-light no-hover">\n					<span class="line-height-1 bigger-170 blue"> <%= profile.get(\'count_visits\') %></span>\n\n					<br>\n					<span class="line-height-1 smaller-90"> Views </span>\n				</span>\n				<% } %>\n\n				<span class="btn btn-app btn-sm btn-pink no-hover" id=\'channels_list\'>\n					<span class="line-height-1 bigger-170"> <%= enabled.length %> </span>\n\n					<br>\n					<span class="line-height-1 smaller-90" > Channels </span>\n				</span>\n\n				<span class="btn btn-app btn-sm btn-grey no-hover" id=\'channels_pendings_list\'>\n					<span class="line-height-1 bigger-170"> <%= disabled.length %> </span>\n\n					<br>\n					<span class="line-height-1 smaller-90"> Pending </span>\n				</span>\n\n				<span class="btn btn-app btn-sm btn-success no-hover" id="channels_fan">\n					<span class="line-height-1 bigger-170"> <%= channels_fan.length %> </span>\n\n					<br>\n					<span class="line-height-1 smaller-90"> Fan </span>\n				</span>\n\n				<span class="btn btn-app btn-sm btn-primary no-hover" id="channels_is_moderator">\n					<span class="line-height-1 bigger-170"> <%= channels_moderated.length %> </span>\n\n					<br>\n					<span class="line-height-1 smaller-90"> Moderate </span>\n				</span>\n			</div>\n\n			<div class="space-12"></div>\n			\n			<div class="content-show"></div>\n		</div>\n	</div>\n\n<!-- PAGE CONTENT ENDS -->\n</div>\n\n</script>\n'}),define("text!apps/dashboard/show/templates/dashboard_Template.html",[],function(){return'<script>\n<div class="profile-user-info profile-user-info-striped">\n	<div class="profile-info-row">\n		<div class="profile-info-name"> Username </div>\n\n		<div class="profile-info-value">\n			<span id="username" class="editable editable-click"><%= username %></span>\n		</div>\n	</div>\n	<%if ((typeof(profile) != \'undefined\') && profile.get(\'gender\')) {%>\n	<div class="profile-info-row">\n		<div class="profile-info-name"> Gender </div>\n\n		<div class="profile-info-value">\n			<span id="gender" class="editable editable-click"><%= profile.get(\'gender\') %></span>\n		</div>\n	</div>\n	<%}%>\n\n	<div class="profile-info-row">\n		<div class="profile-info-name"> Location </div>\n\n		<div class="profile-info-value">\n			<i class="fa fa-map-marker light-orange bigger-110"></i>\n\n			<% if (typeof(country) != \'undefined\') {%><span id="country" class="editable editable-click"><%= city.country %></span><% } %>\n			<% if (typeof(city) != \'undefined\') {%><span id="city" class="editable editable-click"><%= city.name %></span><% } %>\n		</div>\n	</div>\n	\n	<% if ((typeof(profile) != \'undefined\') && profile.get(\'birthday\')) {%>\n	<div class="profile-info-row">\n		<div class="profile-info-name"> Age </div>\n\n		<div class="profile-info-value">\n			<span id="age" class="editable editable-click"><%= new Date().getFullYear() - moment(profile.get(\'birthday\')).year()%></span>\n		</div>\n	</div>\n	<% } %>\n	<% if ((typeof(profile) != \'undefined\') && profile.get(\'seeking\')) {%>\n	<div class="profile-info-row">\n		<div class="profile-info-name"> Seeking </div>\n\n		<div class="profile-info-value">\n			<span id="seeking" class="editable editable-click"><%= profile.get(\'seeking\') %> </span>\n		</div>\n	</div>\n	<% } %>\n\n	<div class="profile-info-row">\n		<div class="profile-info-name"> Last Online </div>\n\n		<div class="profile-info-value">\n			<span id="login" class="editable editable-click"><%= moment(last_login).format(\'MMMM Do YYYY, h:mm:ss a\')%></span>\n		</div>\n	</div>\n	<%if ((typeof(profile) != \'undefined\') && profile.get(\'about\')) {%>\n	<div class="profile-info-row">\n		<div class="profile-info-name"> About Me </div>\n\n		<div class="profile-info-value">\n			<span id="about" class="editable editable-click"><%= profile.get(\'about\') %></span>\n		</div>\n	</div>\n	<% } %>\n	\n	<%if ((typeof(profile) != \'undefined\') && profile.get(\'you_want\')) {%>\n	<div class="profile-info-row">\n		<div class="profile-info-name"> You want </div>\n\n		<div class="profile-info-value">\n			<span id="you_want" class="editable editable-click"><%= profile.get(\'you_want\') %></span>\n		</div>\n	</div>\n	<%}%>\n</div>\n\n<div class="space-20"></div>\n</script>'}),define("apps/dashboard/show/show_view",["app","apps/commons/list/listView","text!apps/dashboard/show/templates/Layout_Template.html","text!apps/dashboard/show/templates/dashboard_Template.html","text!apps/dashboard/show/templates/list_photos.html","handlebars"],function(e,t,n,r,i,s){var o=null;return e.module("DashboardApp.Show.View",function(e,o,u,a,f,l){e.create=function(n){if(!o.DashboardApp.Show.dashboardLayout||!o.DashboardApp.Show.dashboardLayout.content_Region){var r=o.request("user:entity:me",window.user_id),i=new t.Loading({message:"Reading User."});o.body_container_main_Region.show(i),f.when(r).done(function(t){var r=new e.Layout({model:t});o.DashboardApp.Show.dashboardLayout=r,r.on("show",function(){r.content_Region.show(n)}),o.body_container_main_Region.show(r)})}else o.DashboardApp.Show.dashboardLayout.content_Region.show(n)},e.Layout=a.Layout.extend({template:n,triggers:{"click #channels_list":"dashboard:channels_moderated","click #channels_pendings_list":"dashboard:channels_pendings_to_moderate","click #channels_fan":"dashboard:channels_fan","click #channels_is_moderator":"dashboard:channels_is_moderator","click #create_channel_from_dashboard":"dashboard:create_channel","click #go_me_edit":"user:edit"},regions:{content_Region:".content-show"},initialize:function(){var e=this;this.on("dashboard:channels_moderated",function(){o.trigger("dashboard:channels_moderated")}),this.on("dashboard:channels_pendings_to_moderate",function(){o.trigger("dashboard:channels_pendings_to_moderate")}),this.on("dashboard:channels_fan",function(){o.trigger("dashboard:channels_fan")}),this.on("dashboard:channels_is_moderator",function(){o.trigger("dashboard:channels_is_moderator")}),this.on("dashboard:change_profile_photo",function(){o.trigger("dashboard:change_profile_photo")}),this.on("dashboard:create_channel",function(){o.trigger("dashboard:create_channel")}),this.on("user:edit",function(){o.trigger("user:edit")}),this.on("render",function(){e.options.subView&&e.content_Region.show(e.options.subView)}),this.options.holder&&this.options.holder.show(this)},templateHelpers:function(){var e={};return e.enabled=[],e.disabled=[],this.model.get("channels")&&this.model.get("channels").length>0&&(enabled=this.model.get("channels").where({enabled:!0}),disabled=this.model.get("channels").where({enabled:!1}),e.enabled=enabled,e.disabled=disabled),e}}),e.Dashboard=a.ItemView.extend({template:r,className:"page-content",initialize:function(){},showChannels:function(e){e.preventDefault(),this.trigger("dashboard:channels_moderated",1)},showChannelsPendings:function(e){e.preventDefault(),this.trigger("dashboard:channels_pendings_to_moderate",0)},onShow:function(){f.ajax({type:"GET",contentType:"application/json",dataType:"json",url:window.api_endpoint+"/api/users/"+window.user_id+"/channels?enabled="+0,success:function(e){f("#channels_pendings_list span:first").text(e.total)},error:function(e,t,n){}})}}),e.ListPhoto=u.Marionette.ItemView.extend({template:s.compile(i),tagName:"li",events:{"click a":"photoClicked"},photoClicked:function(){var e=this;require(["apps/commons/dialog/dialog_view"],function(t){t.confirm("Are you sure you want to change the profile photo?","Change profile photo").then(function(t){t&&e.trigger("dashboard:assigne_profile_photo",e.model)})})}})}),e.DashboardApp.onStop=function(){e.DashboardApp.Show.dashboardLayout=null,o=null},e.DashboardApp.Show.View}),define("apps/channels/edit/edit_controller",["app","apps/channels/edit/edit_view","apps/channels/form/formViewSeparateLayoutAndView","backbone-forms","apps/photos/list/list_view","apps/dashboard/show/show_view","entities/photo"],function(e,t,n,r,i,s){return e.module("ChannelsApp.Edit",function(e,o,u,a,f,l){e.Controller={editChannelNew:function(t,i){o.navigate("rooms/"+t.id+"/edit");var s=new r({model:t}),u=new n.Layout({model:t,type:"edit",form:s});u.on("show",function(){u.form_Region.show(new n.FormView({model:t,type:"edit",form:s}))}),u.on("upload",function(){e.Controller._uploadPhoto(t,i)}),u.on("assigne",function(){e.Controller._assignePhoto(t,i)}),i.show(u)},_uploadPhoto:function(e,t){var n=function(t,n){var r=function(){o.trigger("channel:show",e.get("id"),e.get("slug"))};o.request("channel:photo:assigne",e,n.id,r,r)};requirejs(["apps/photos/upload/upload_view"],function(e){var r=new e.FormItem({configure:{message:"Upload channel photo",profile_hidden:!0,after_upload_callback:n}});t.show(r)})},_assignePhoto:function(e,n){var r=o.request("photo:entities",window.user_id);f.when(r).done(function(r){var s=new i.ListarPhotos({itemView:t.ListPhoto,collection:r});s.on("itemview:channel:assigne_photo",function(t){var n=function(){o.trigger("channel:show",e.get("id"),e.get("slug"))};o.request("channel:photo:assigne",e,t.model.get("id"),n,n)}),n.show(s)}).fail(function(e){requirejs(["apps/commons/errors/generic"],function(t){o.container_center_Region.show(new t.GenericErrorView({model:e}))})})},editModerators:function(t){requirejs(["apps/channels/edit/edit_moderators_view","entities/channel"],function(n){var r=o.request("channel:entity",t);f.when(r).done(function(t){var r=new n.Layout({model:t});r.on("add-moderator",e.Controller.addModerator),r.on("delete-moderator",e.Controller.deleteModerator),s.create(r)})})},addModerator:function(t,n,r){var i=o.request("channel:addModerator",t,n,r);f.when(i).done(function(){e.Controller.editModerators(t.get("id"))}).fail(function(e,t,n){var r=e.responseJSON.errors?e.responseJSON.errors:e.responseJSON.message;o.body_container_main_Region.currentView.content_Region.currentView.showErrors(r)})},deleteModerator:function(t,n){var r=o.request("channel:deleteModerator",t,n);f.when(r).done(function(){e.Controller.editModerators(t.get("id"))}).fail(function(e,t,n){o.body_container_main_Region.currentView.content_Region.currentView.showErrors(e.responseJSON.errors)})}}}),e.ChannelsApp.Edit.Controller});