/*! Lazy Load 1.9.3 - MIT license - Copyright 2010-2013 Mika Tuupola */

/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */

define("text!apps/users/index/templates/index_layout_template.html",[],function(){return'<div class="col-sm-12" id="index_top">\n</div>\n<div class="center">\n    <h2>Or private chat with online people</h2>\n    <hr/>\n</div>\n\n<div class="col-xs-12" id="index_medium">\n</div>\n        \n<hr/>\n<div class="clearfix"></div>\n<h2 class="center">Chat Rooms countries</h2>\n<div class="col-sm-12" id="index_bottom"></div>\n<h2 class="center">Popular Chat Rooms</h2>\n<div class="col-sm-12" id="popular_index_bottom"></div>'}),define("apps/users/index/index_view",["app","text!apps/users/index/templates/index_layout_template.html","handlebars"],function(e,t,n){return e.module("UsersApp.Index.View",function(e,r,i,s,o,u){e.Layout=s.Layout.extend({template:n.compile(t),regions:{index_top_Region:"#index_top",index_medium_Region:"#index_medium",index_bottom_Region:"#index_bottom",popular_index_bottom_Region:"#popular_index_bottom"}})}),e.UsersApp.Index.View}),define("text!apps/commons/chat/templates/chat_template.html",[],function(){return'<script type="text/javascript">\n<div class="row">\n	<div class="col-lg-12 col-xs-12 well" style="text-align:center;">\n		<h2>Join to public chat room</h2>\n		<p>You can full access to chat. You can enter to chat on the button below.</p>\n		<div class="row">\n			<div class="col-xs-12">\n				<div class="form-group">\n                     <br>\n					<a class="btn btn-primary btn-lg" id="goChat"><i class="fa fa-comment"></i> Enter to chat</a>\n				</div>\n			</div>\n		</div>\n	</div>\n    <br />\n    <br />\n    <!--\n	<div style="text-align:center;padding:10px; margin-bottom:15px" class="col-lg-6 col-xs-12"  >\n		<h2>Create your own private chat</h2>\n		<p>Create and share a private chat room.</p>\n		<div class="row">\n			<div class="col-xs-12">\n				<div class="form-group">\n                    <a class="btn btn-info btn-lg" title="Create a Private chat" id="goChatPrivate">Create a Private chat</a>\n				</div>\n			</div>\n		</div>\n		\n	</div>\n        -->\n</div>\n</script>\n'}),define("text!apps/commons/chat/templates/enter_chat_template.html",[],function(){return'<script>\n<div class="row">\n        <div class="col-xs-4">\n            <img width="94" height="106" alt="{{ "Chatsfree Pacman" | trans }}" src="/images/pachatea.png">\n        </div>\n        <div class="col-xs-8">\n            <div class="row">\n                <div class="col-xs-12 pull-right" style="margin-bottom:10px;">\n\n            <div class="input-group input-group-lg">\n              <% if(typeof(window.chat_connected) == \'undefined\' || window.chat_connected == false){ %>\n                  <span class="input-group-addon"><i class="fa fa-user"></i></span>\n                  <% if(typeof(nick) != \'undefined\'){ %>\n                      <input type="text" class="form-control" id="username" name="_username" value="<%= nick %>">\n                  <% }else{ %>\n                      <input type="text" class="form-control" id="username" name="_username" placeholder="Write your nick...">\n                  <% } %>\n              <% } %>\n            </div>\n\n\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    <button type="submit" class="btn btn-primary btn-chat pull-right" id="goChat"><i class="fa fa-comments"></i> Chat </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>'}),define("apps/commons/chat/chatView",["app","text!apps/commons/chat/templates/chat_template.html","text!apps/commons/chat/templates/enter_chat_template.html"],function(e,t,n){return e.module("Commons.Views",function(e,r,i,s,o,u){e.widgetTwoChat=s.ItemView.extend({template:t,events:{"click #goChatPrivate":"goChatPrivate","click #goChat":"goChat"},goChatPrivate:function(){requirejs(["util/util"],function(){var e=this.uniqid();r.trigger("chat:private:show",e)})},goChat:function(){r.sendEventAnalytics("event","Home","Chat","#chatsfree");var e=r.request("user:entity:me",window.user_id);o.when(e).done(function(e){r.trigger("chat:show",{nick:e.get("username")})})}}),e.widgetChat=s.ItemView.extend({template:n,events:{"click #goChat":"renderChat"},serializeData:function(){return this.options.nick?{nick:this.options.nick}:{}},renderChat:function(){o.ajax({type:"PUT",url:window.api_endpoint+"/api/channels/"+this.model.get("id")+"/visits"}),r.sendEventAnalytics("event","Rooms","Chat",this.model.get("irc_channel")),r.trigger("chat:show",{channel:this.model.get("irc_channel"),nick:this.getUserEnteredNick()})},getUserEnteredNick:function(){var e=(this.$el.find("#username").val()||"").replace(/^\s+|\s+$/gm,"");return e===""?r.User.get("username"):e}})}),e.Commons.Views}),define("text!apps/commons/list/templates/composite.html",[],function(){return"<script>\n<span>\n</span>\n</script>"}),define("text!apps/commons/list/templates/itemViewTemplate.html",[],function(){return'<script>\n	<a href="/users/<%= username_canonical %>-<%= id %>" data-rel="colorbox" class="cboxElement">\n		<img width=<%= sizeImage.width %> height=<%= sizeImage.height %> style="border: 2px solid #FFF; border-radius: 4px 4px 4px 4px; max-height:150px; max-width:180px;" <%=src_or_data()%>"<% if ((typeof(profile) != "undefined") && (typeof(profile.profile_photo) != "undefined")) { %>\n								<%= profile.profile_photo.path_small %>\n							<% } else { %>\n								<%= window.default_user_image_icon %>\n							<% } %>" title="<%= username %>">\n	</a>\n</script>'}),define("text!apps/commons/list/templates/empty.html",[],function(){return"<p>There are none.</p>"}),define("apps/commons/list/emptyView",["app","text!apps/commons/list/templates/empty.html","handlebars"],function(e,t,n){return e.module("Commons.List.Empty.View",function(e,r,i,s,o,u){e.EmptyView=s.View.extend({template:t,render:function(){var e=n.compile(t);this.$el.append(e())}})}),e.Commons.List.Empty.View}),define("text!apps/commons/list/templates/loading.html",[],function(){return'<script>\n<p><%= message %></p>\n<div id="spinner"></div>\n</script>'}),!function(e,t,n,r){var i=e(t);e.fn.lazyload=function(s){function o(){var t=0;f.each(function(){var n=e(this);if(!l.skip_invisible||n.is(":visible"))if(!e.abovethetop(this,l)&&!e.leftofbegin(this,l))if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else n.trigger("appear"),t=0})}var u,f=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(r!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),r!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(l,s)),u=l.container===r||l.container===t?i:e(l.container),0===l.event.indexOf("scroll")&&u.bind(l.event,function(){return o()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",l.placeholder),n.one("appear",function(){if(!this.loaded){if(l.appear){var r=f.length;l.appear.call(t,r,l)}e("<img />").bind("load",function(){var r=n.attr("data-"+l.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[l.effect](l.effect_speed),t.loaded=!0;var i=e.grep(f,function(e){return!e.loaded});if(f=e(i),l.load){var s=f.length;l.load.call(t,s,l)}}).attr("src",n.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&n.bind(l.event,function(){t.loaded||n.trigger("appear")})}),i.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&f.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){o()}),this},e.belowthefold=function(n,s){var o;return o=s.container===r||s.container===t?(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():e(s.container).offset().top+e(s.container).height(),o<=e(n).offset().top-s.threshold},e.rightoffold=function(n,s){var o;return o=s.container===r||s.container===t?i.width()+i.scrollLeft():e(s.container).offset().left+e(s.container).width(),o<=e(n).offset().left-s.threshold},e.abovethetop=function(n,s){var o;return o=s.container===r||s.container===t?i.scrollTop():e(s.container).offset().top,o>=e(n).offset().top+s.threshold+e(n).height()},e.leftofbegin=function(n,s){var o;return o=s.container===r||s.container===t?i.scrollLeft():e(s.container).offset().left,o>=e(n).offset().left+s.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("jquery-lazyload",["jquery"],function(){}),define("util/lazyloaderhelper",["jquery-lazyload"],function(){var e=function(e){var t=!1;e.on("show",function(){e.$el.find("img.lazy").lazyload({effect:"fadeIn"}),e.on("after:item:added",function(e){e.$el.find("img.lazy").lazyload({effect:"fadeIn"}),e.on("show",function(){e.$el.find("img.lazy").lazyload({effect:"fadeIn"}),t=!0})})})};return e}),function(e,t){typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("spin",t):e.Spinner=t()}(this,function(){function r(e,t){var n=document.createElement(e||"div"),r;for(r in t)n[r]=t[r];return n}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,r,i,o){var u=["opacity",r,~~(e*100),i,o].join("-"),a=.01+i/o*100,f=Math.max(1-(1-e)/r*(100-a),e),l=n.substring(0,n.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return t[u]||(s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+r)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length),t[u]=1),u}function u(t,n){var r=t.style,i,s;if(r[n]!==undefined)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(s=0;s<e.length;s++){i=e[s]+n;if(r[i]!==undefined)return i}}function a(e,t){for(var n in t)e.style[u(e,n)||n]=t[n];return e}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]===undefined&&(e[r]=n[r])}return e}function l(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function h(e){if(typeof this=="undefined")return new h(e);this.opts=f(e||{},h.defaults,c)}function p(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}s.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:s+" "+s,coordorigin:-r+" "+ -r}),{width:s,height:s})}function c(t,s,u){i(f,i(a(o(),{rotation:360/n.lines*t+"deg",left:~~s}),i(a(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:u}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,s=2*r,u=-(n.width+n.length)*2+"px",f=a(o(),{position:"absolute",top:u,left:u}),l;if(n.shadow)for(l=1;l<=n.lines;l++)c(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)c(l);return i(t,f)},h.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var e=["webkit","Moz","ms","O"],t={},n,s=function(){var e=r("style",{type:"text/css"});return i(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),c={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(e){this.stop();var t=this,i=t.opts,s=t.el=a(r(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),o=i.radius+i.length+i.width,u,f;e&&(e.insertBefore(s,e.firstChild||null),f=l(e),u=l(s),a(s,{left:(i.left=="auto"?f.x-u.x+(e.offsetWidth>>1):parseInt(i.left,10)+o)+"px",top:(i.top=="auto"?f.y-u.y+(e.offsetHeight>>1):parseInt(i.top,10)+o)+"px"})),s.setAttribute("role","progressbar"),t.lines(s,t.opts);if(!n){var c=0,h=(i.lines-1)*(1-i.direction)/2,p,d=i.fps,v=d/i.speed,m=(1-i.opacity)/(v*i.trail/100),g=v/i.lines;(function y(){c++;for(var e=0;e<i.lines;e++)p=Math.max(1-(c+(i.lines-e)*g)%v*m,i.opacity),t.opacity(s,e*i.direction+h,p,i);t.timeout=t.el&&setTimeout(y,~~(1e3/d))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function l(e,n){return a(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*s+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var s=0,u=(t.lines-1)*(1-t.direction)/2,f;for(;s<t.lines;s++)f=a(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&o(t.opacity,t.trail,u+s*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&i(f,a(l("#000","0 0 4px #000"),{top:"2px"})),i(e,i(f,l(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var d=a(r("group"),{behavior:"url(#default#VML)"});return!u(d,"transform")&&d.adj?p():n=u(d,"animation"),h}),function(e){if(typeof exports=="object")e(require("jquery"),require("spin"));else if(typeof define=="function"&&define.amd)define("spin.jquery",["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(n,r){return this.each(function(){var i=e(this),s=i.data();s.spinner&&(s.spinner.stop(),delete s.spinner),n!==!1&&(n=e.extend({color:r||i.css("color")},e.fn.spin.presets[n]||n),s.spinner=(new t(n)).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),define("apps/commons/list/listView",["app","text!apps/commons/list/templates/composite.html","text!apps/commons/list/templates/itemViewTemplate.html","apps/commons/list/emptyView","text!apps/commons/list/templates/loading.html","util/lazyloaderhelper","spin.jquery"],function(e,t,n,r,i,s){return e.module("Commons.List",function(e,o,u,a,f,l){var c=a.ItemView.extend({tagName:'li class="col-xs-3"',template:n,initialize:function(e){this.tagName=this.options.tagName,this.delegateEventsToParentView(),e.lazy&&s(this)},templateHelpers:function(){var e=this;return{src_or_data:function(){return e.options.lazy?'class="lazy" data-original=':"src="}}},serializeData:function(){var e=function(t){var n={};return l.each(t.attributes,function(t,r){l.isFunction(t.toJSON)?n[r]=e(t):n[r]=t}),n},t=e(this.model);return l.extend(t,{sizeImage:this.options.sizeImage}),t},delegateEventsToParentView:function(){var e=/^(\S+)\s*(.*)$/;if(this.options.toParentEvents){var t=this.options.toParentEvents;for(var n in t){var r=t[n],i=n.match(e),s=i[1],o=i[2];this.delegateEventToParentView(s,o,r)}}},delegateEventToParentView:function(e,t,n){var r=this.options.parentView,i=l.bind(r[n],r,this);t===""?this.$el.on(e,i):this.$el.on(e,t,i)}});e.CompositeView=u.Marionette.CompositeView.extend({tagName:'ul class="row list-unstyled"',itemView:c,emptyView:r.EmptyView,template:t,itemViewOptions:function(e,t){var n={template:this.options.templateItemView};return this.options.tagNameItemView&&l.extend(n,{tagName:this.options.tagNameItemView}),this.options.sizeImage&&(f.isPlainObject(this.options.sizeImage)?l.extend(n,{sizeImage:this.options.sizeImage}):l.extend(n,{sizeImage:{width:this.options.sizeImage,height:this.options.sizeImage}})),this.subviewEvents&&l.extend(n,{toParentEvents:this.subviewEvents,parentView:this}),this.options.lazy&&l.extend(n,{lazy:!0}),this.options.perserveOriginalTemplate&&l.extend(n,{perserveOriginalTemplate:!0}),n}}),e.Loading=a.ItemView.extend({template:i,initialize:function(e){var t=e||{};this.title=t.title||"Loading Data",this.message=t.message||"Please wait, data is loading."},serializeData:function(){return{title:this.title,message:this.message}},onShow:function(){var e={lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"30px",left:"auto"};f("#spinner").spin(e)}})}),e.Commons.List}),define("text!apps/users/index/templates/item.html",[],function(){return'<script>\n	<a href="/users/<%= username_canonical %>-<%= id %>" data-rel="colorbox" class="cboxElement">\n		<img class="lazy" width=<%= sizeImage.width %> height=<%= sizeImage.height %> style="border: 2px solid #FFF; border-radius: 4px 4px 4px 4px; max-height:150px; max-width:180px;" data-original=<% if ((typeof(profile) != "undefined") && (typeof(profile.profile_photo) != "undefined")) { %>\n								"<%= profile.profile_photo.path_medium %>"\n							<% } else { %>\n								<%= window.default_user_image_medium %>\n							<% } %> title="<%= username %>">\n			<% if ((typeof(on_line) != "undefined") && on_line) {%>\n			<i title="User online just now" data-placement="right" data-toggle="tooltip" class="fa fa-circle green" style="position: absolute; font-weight: bold; bottom: 6%; right: 31%;">online</i>\n			<% } %>\n	</a>\n</script>'}),define("text!apps/users/index/templates/composite.html",[],function(){return'<script>\n<span id="channel_list">\n\n</span>\n</script>'}),define("text!apps/channels/list/templates/list_layout_template.html",[],function(){return'<div class="col-sm-12" id="index_top">\n	<h1>List of irc channels:</h1>\n</div>\n<hr/>\n<div class="col-sm-12" id="index_medium">\n</div>\n\n<a href="/rooms/categories" title="List all categories"><h2>List all categories</h2></a>'}),define("text!apps/channels/list/templates/users_channels_list_layout_template.html",[],function(){return'<div class="col-sm-12" id="index_top">\n	<h1>{{ title }}</h1>\n</div>\n<hr/>\n<div class="col-sm-12" id="index_medium">\n</div>'}),define("text!apps/channels/list/templates/item_template.html",[],function(){return'<script>\n	<div class="col-xs-3">\n		<a href="/<%= slug %>" data-rel="colorbox" class="cboxElement">\n			<% if (typeof(photo) != "undefined") { %>\n				<img height="100%" width="100%" class="pull-left lazy" data-original=<%=photo.path %> alt="<%= 	name %>">\n			<% } else { %>\n				<img height="100%" width="100%" class="pull-left lazy" data-original="<%= window.default_chat_image %>" alt="<%= 	name %>">\n			<% } %>\n		</a>\n	</div>\n	<div class="col-xs-9 box-basic">\n		<h3>\n			<a href="/<%= slug %>" data-rel="colorbox" class="cboxElement">\n				Room <%= name %>\n			</a>\n		</h3>\n		<p class="hidden-xs" style="border-bottom:1px solid;">Chat room of <%=name%>, enter to chat for free</p>\n		<div class="row">\n			<div class="col-xs-4 border-right">\n				<a href="/users/<%=owner.username_canonical%>-<%=owner.id%>">\n				<img width="34" height="34" class="pull-left frame-profile lazy" data-original=\n				<% if ((typeof(owner.profile) != "undefined") && (typeof(owner.profile.profile_photo) != "undefined")) { %>\n					"<%= owner.profile.profile_photo.path_icon %>"\n				<% } else { %>\n					"<%= window.default_user_image_icon %>"\n				<% } %>\n				>\n				<%=owner.username%></a>\n				<p class="type-off">Founder</p>\n			</div>\n			<div class="col-xs-4 border-right">\n				<i class="fa fa-user"></i> <%= count_visits %>\n				<p class="type-off">Visitors</p>\n			</div>	\n			<div class="col-xs-4">\n				<i class="fa fa-bullhorn"></i><a class="channel-type"><b> <%= channel_type.name %></b></a>\n				<p class="type-off">Channel Type</p>\n			</div>				\n		</div>\n	</div>\n</script>'}),define("text!apps/channels/list/templates/popular_item_template.html",[],function(){return'<script>\n	<div class="col-xs-3">\n		<a href="/<%= slug %>" data-rel="colorbox" class="cboxElement">\n			<% if (typeof(photo) != "undefined") { %>\n				<img height="100%" width="100%" class="pull-left lazy" data-original=<%=photo.path %> alt="<%= 	name %>">\n			<% } else { %>\n				<img height="100%" width="100%" class="pull-left lazy" data-original="<%= window.default_chat_image %>" alt="<%= 	name %>">\n			<% } %>\n		</a>\n	</div>\n	<div class="col-xs-9">\n		<h3>\n			<a href="/<%= slug %>" data-rel="colorbox" class="cboxElement">\n				Room <%= name %>\n			</a>\n		</h3>\n		<p class="hidden-xs">Chat room of <%=name%>, enter to chat for free</p>\n		<p class="type-off">Created by <a href="/users/<%=owner.username_canonical%>-<%=owner.id%>"><%=owner.username%></a></p>\n\n		<div style="margin-bottom:15px;" class="col-lg-6 col-xs-12 clearfix">\n			<%\n			var children = channels.slice(0,4);\n			for(var i=0;i<children.length;i++){\n			%>\n			<span class="type-off">\n				<a title="Enter the chat of <%= children[i].name %>" href="/<%= children[i].slug %>"> &nbsp; <%= children[i].name %></a>\n			</span>\n			<% } %>\n			<a title="Enter the chat of <%= name %>" href="/<%= slug %>">more...</a>\n        </div>\n	</div>\n</script>'}),define("apps/channels/list/list_view",["app","text!apps/channels/list/templates/list_layout_template.html","text!apps/channels/list/templates/users_channels_list_layout_template.html","text!apps/channels/list/templates/item_template.html","text!apps/channels/list/templates/popular_item_template.html","handlebars","util/lazyloaderhelper","apps/commons/list/emptyView"],function(e,t,n,r,i,s,o,u){return e.module("ChannelsApp.List.View",function(e,a,f,l,c,h){e.Layout=l.Layout.extend({template:s.compile(t),regions:{index_top_Region:"#index_top",index_medium_Region:"#index_medium",index_bottom_Region:"#index_bottom"}}),e.UsersChannelsLayout=l.Layout.extend({template:s.compile(n),regions:{index_top_Region:"#index_top",index_medium_Region:"#index_medium",index_bottom_Region:"#index_bottom"},serializeData:function(){return{title:this.options.title}}}),e.ItemView=l.ItemView.extend({tagName:'div style="margin-bottom:25px;"',className:"col-lg-6 col-xs-12 clearfix",template:r,events:{"click .channel-type":"clickedChannelType"},clickedChannelType:function(){var e="filter=channelType="+this.model.get("channel_type").name;a.trigger("channels:filter",e)}}),e.PopularItemView=e.ItemView.extend({template:i}),e.ItemsListView=f.Marionette.CompositeView.extend({itemViewContainer:"#channel_list",emptyView:u.EmptyView,itemView:e.ItemView,initialize:function(){o(this),this.clearFixes=[]},appendHtml:function(e,t,n){if(n!==0&&n%2===0){var r=this.createClearfixDiv();this.clearFixes.push(r),e.$el.find(this.itemViewContainer).append(r.el)}e.$el.find(this.itemViewContainer).append(t.el)},checkEmpty:function(){this.isEmpty(this.collection)&&(h.each(this.clearFixes,function(e){e.remove()}),this.clearFixes=[],this.showEmptyView())},itemViewOptions:function(e,t){var n={template:this.options.templateItemView};return this.options.tagNameItemView&&h.extend(n,{tagName:this.options.tagNameItemView}),this.options.sizeImage&&(c.isPlainObject(this.options.sizeImage)?h.extend(n,{sizeImage:this.options.sizeImage}):h.extend(n,{sizeImage:{width:this.options.sizeImage,height:this.options.sizeImage}})),n},createClearfixDiv:function(){var e=new f.Marionette.ItemView({template:s.compile("")});return e.render().$el.addClass("clearfix"),e}})}),e.ChannelsApp.List.View}),define("apps/users/index/index_controller",["app","apps/users/index/index_view","apps/commons/pagination/paginate","apps/commons/chat/chatView","apps/commons/list/listView","text!apps/users/index/templates/item.html","text!apps/users/index/templates/composite.html","apps/channels/list/list_view","entities/user","entities/channel"],function(e,t,n,r,i,s,o,u){return e.module("UsersApp.Index",function(e,a,f,l,c,h){e.Controller={show:function(){e.indexLayout=new t.Layout,channels_collection=new n.Collection,channels_collection.url=window.api_endpoint+"/api/channels?filter=channelType%3Dlocale%2CisRoot%3D1&limit=4&offset=0&order=name%3Dasc",feching_popular_channels_collection=a.request("channel:entities","?filter=&limit=4&offset=0&order=fans%3Ddesc");var f=a.request("user:realtime:entities",18),l=new n.Layout,h=new n.Layout,p=new i.Loading({message:""}),d=new i.Loading({message:""}),v=new i.Loading({message:""});e.indexLayout.on("show",function(){l.on("render",function(){l.list_region.show(p),e.Controller._fetchChannelCollection(channels_collection,l)}),e.indexLayout.index_bottom_Region.show(l),c.when(feching_popular_channels_collection).done(function(t){h.on("render",function(){h.list_region.show(new u.ItemsListView({collection:t,template:o}))}),e.indexLayout.popular_index_bottom_Region.show(h)}),e.indexLayout.popular_index_bottom_Region.show(v),e.indexLayout.index_medium_Region.show(d),c.when(f).done(function(t){e.indexLayout.index_medium_Region.show(new i.CompositeView({collection:t,tagName:"div",tagNameItemView:'div class="col-xs-4 col-sm-2"',cssStyle:"nadaaa",templateItemView:s,sizeImage:"100%",lazy:!0}))}).fail(function(e){requirejs(["apps/commons/errors/generic"],function(t){a.container_center_Region.show(new t.GenericErrorView({model:e}))})}),e.indexLayout.index_top_Region.show(new r.widgetTwoChat)}),a.body_container_main_Region.show(e.indexLayout)},_fetchChannelCollection:function(e,t){e.fetch({reset:!0,success:function(n){n.getPage(1),t.list_region.show(new u.ItemsListView({collection:e,template:o}))},error:function(e,t,n){requirejs(["apps/commons/errors/generic"],function(e){a.container_center_Region.show(new e.GenericErrorView({model:t}))})},silent:!0})}}}),e.UsersApp.Index.Controller});