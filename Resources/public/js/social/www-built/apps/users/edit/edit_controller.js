define(["app","apps/users/form/formView","backbone-bootstrap","entities/user","apps/dashboard/show/show_view"],function(e,t,n,r,i){return e.module("UsersApp.Edit",function(e,n,s,o,u,a){e.Controller={editUser:function(){requirejs(["entities/profile","apps/commons/list/listView"],function(e,r){var s=n.request("user:entity:me",window.user_id),o=new r.Loading({message:"Reading User."});n.body_container_main_Region.show(o),u.when(s).done(function(r){if(typeof r.attributes.profile!="undefined"){var s=a.extend(r.attributes.profile.attributes,{id:10,userId:r.attributes.id});profile=new e.Profile(s);var o=new t.LayoutUser({model:profile,type:"create"});i.create(o)}else{var f=n.request("profile:entity:new",window.user_id);u.when(f).done(function(e){var n=new t.LayoutUser({model:e,type:"create"});i.create(n)})}}).fail(function(e){requirejs(["apps/commons/errors/generic"],function(t){n.container_center_Region.show(new t.GenericErrorView({model:e}))})})})},changePassword:function(){requirejs(["apps/users/edit/edit_view"],function(e){var s=new e.LayoutChangePasswordEmail,o=n.request("user:entity:me",window.user_id);s.on("show",function(){var e=new r.ChangePassword,n=new r.ChangeEmail,i=new t.LayoutUserChangePassword({model:e,type:"patch"}),o=new t.LayoutUserChangeEmail({model:n,type:"put"});s.change_password_Region.show(i),s.change_email_Region.show(o)}),i.create(s)})}}}),e.UsersApp.Edit.Controller});