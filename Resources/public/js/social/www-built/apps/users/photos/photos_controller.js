define(["app","apps/photos/list/list_view","apps/commons/list/listView","entities/photo"],function(e,t,n){return e.module("UsersApp.Show.Photos",function(e,r,i,s,o,u){e.Controller={listPhotos:function(i){typeof r.UsersApp.Show.userLayout=="undefined"?requirejs(["apps/users/show/show_view","apps/users/show/user_sidebar","apps/users/show/user_tabs","entities/user","util/util"],function(s,u,a){var f=r.request("user:entity",i),l=new n.Loading({message:"Reading Photos."}),c=new s.Layout;c.on("show",function(){c.users_show_left_Region.show(l)}),r.body_container_main_Region.show(c),o.when(f).done(function(n){var r=new a.View({model:n,region:c}),i=new u.View({model:n});c.users_show_left_Region.show(i),c.body_container_top_Region.show(r),e.Controller._renderPhotos(n,c.users_show_Region,t)}).fail(function(e){requirejs(["apps/commons/errors/generic"],function(t){r.container_center_Region.show(new t.GenericErrorView({model:e}))})})}):r.UsersApp.Show.userLayout.users_show_Region.show(new t.ListPhotos({collection:PhotoCollection}))},_renderPhotos:function(t,i,s){removeAndAddClass("li","active","#tabPhotos"),r.navigate("users/"+t.id+"/photos");var u=r.request("photo:entities",t.id),a=new n.Loading({message:"Reading Photos."});i.show(a),o.when(u).done(function(t){var n=new s.ListarPhotos({collection:t});n.on("photo:clicked",function(t){e.Controller._renderPhoto(i,n,t)}),i.show(n)})},_renderPhoto:function(e,t,n){require(["apps/users/photos/photo_view"],function(r){var i=new r.PhotoView({model:n});i.on("photo:back",function(){e.show(t)}),e.show(i)})}}}),e.UsersApp.Show.Photos.Controller});