define(["app","paginator","text!apps/users/pagination/templates/pagination_layout.html","text!apps/commons/pagination/templates/pages_template.html","text!apps/users/pagination/templates/pagination_item_template.html"],function(e,t,n,r,i){return e.module("UsersApp.PaginationUser",function(e,s,o,u,a,f){var l=12;e.Collection=t.clientPager.extend({initialize:function(e){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},paginator_ui:{firstPage:1,currentPage:1,perPage:l,totalPages:10,pagesInRange:4},paginator_core:{type:"GET",dataType:"jsonp",url:window.api_endpoint+"/app_dev.php/api/users"},parse:function(e){return this.totalPages=Math.ceil(e.count/l),e.resources},sync:function(e,t,n){var r=this,i=f.extend({dataType:"json",url:r.paginator_core.url},n);return a.ajax(i)}});var c=u.Layout.extend({serializeData:function(){return this.model.attributes},templateHelpers:function(){return{markdown:function(e){return markdown.toHTML(e)}}}}),h=u.View.extend({initialize:function(e){var t=this.collection;t.on("reset",this.addAll,this),this.addAll()},addAll:function(){var e=this;requirejs(["text!"+this.options.myTemplate],function(t){e.$el.empty(),e.collection.each(function(n){var r=new c({model:n,template:t});e.$el.append(r.render().el)})})}}),p=u.ItemView.extend({template:r,className:"pagination pagination-centered",events:{"click .prev":"gotoPrev","click .next":"gotoNext","click .page":"gotoPage"},gotoPrev:function(){return this.collection.prevPage(),this.render(),!1},gotoPage:function(e){var t=a(e.target).text();return this.collection.goTo(t),this.render(),!1},gotoNext:function(e){return this.collection.nextPage(),this.render(),!1},serializeData:function(){return this.collection},initialize:function(){},render:function(){var e=f.template(r,this.collection);a(this.el).html(e)}});e.ItemsView=u.Layout.extend({template:n,regions:{list_region:".list_region",pages_region:".pages"},onRender:function(){var e=this;e.list_region.show(new h({collection:this.collection,myTemplate:e.options.myTemplate})),this.collection.fetch({reset:!0,success:function(t){t.pager(),e.pages_region.show(new p({collection:t}))},error:function(e){},silent:!0})}}),e.Layout=u.Layout.extend({template:n,regions:{list_region:".list_region",pages_region:".pages"}}),e.ItemView=u.ItemView.extend({tagName:'div style="margin-bottom:25px;"',className:"col-lg-6 col-xs-12 clearfix",template:i}),e.ItemsListView=o.Marionette.CompositeView.extend({itemViewContainer:"span",itemView:e.ItemView,appendHtml:function(e,t,n){var r=e.itemViewContainer?e.$(e.itemViewContainer):e.$el,i=r.children(),s=this.options.columns===undefined?3:this.options.columns;a("#cont"+(n%s+1)).append(t.el)}}),e.PaginationView=u.ItemView.extend({template:f.template(r,this.collection),className:"pagination pagination-centered",events:{"click .prev":"gotoPrev","click .next":"gotoNext","click .page":"gotoPage"},gotoPrev:function(){return this.collection.prevPage(),this.render(),!1},gotoPage:function(e){var t=a(e.target).text();return this.collection.goTo(t),this.render(),!1},gotoNext:function(e){return this.collection.nextPage(),this.render(),!1},serializeData:function(){return this.collection},initialize:function(){}})}),e.UsersApp.PaginationUser});