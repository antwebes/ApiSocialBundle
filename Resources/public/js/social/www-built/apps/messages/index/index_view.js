define(["app","text!apps/messages/index/templates/layout.html","text!apps/messages/index/templates/index.html","text!apps/messages/index/templates/item.html","text!apps/messages/index/templates/messages.html","text!apps/messages/index/templates/message.html","text!apps/messages/index/templates/no_messages.html","handlebars"],function(e,t,n,r,i,s,o,u){return e.module("MessagesApp.Index.View",function(e,a,f,l,c,h){e.Layout=l.Layout.extend({template:t,events:{"click #compose":"composeLinkClicked","click #inbox-tab":"inboxClicked","click #sent-tab":"sentClicked"},regions:{mainRegion:"#main"},composeLinkClicked:function(e){return e.preventDefault(),e.stopPropagation(),this.trigger("thread:compose"),!1},inboxClicked:function(e){return e.preventDefault(),e.stopPropagation(),this.trigger("inbox"),!1},sentClicked:function(e){return e.preventDefault(),e.stopPropagation(),this.trigger("sent"),!1},setActiveTab:function(e){var t=this,n=function(){t.$el.find("#inbox-tabs li").removeClass("active"),t.$el.find("#"+e).addClass("active")};this.on("item:rendered",function(){n(),t.hasBeenRendered=!0}),this.hasBeenRendered&&n()}}),e.Thread=l.ItemView.extend({tagName:"div",template:u.compile(r),triggers:{"click .message-item":"thread:show"}}),e.Message=l.ItemView.extend({tagName:"div",template:u.compile(s)}),e.NoMessages=l.ItemView.extend({template:u.compile(o)}),e.Threads=l.CompositeView.extend({tagName:"div",template:n,itemView:e.Thread,emptyView:e.NoMessages}),e.Messages=l.CompositeView.extend({template:u.compile(i),itemView:e.Message,itemViewContainer:"#messages",events:{"click #reply":"replyClicked","click #delete":"deleteClicked","click .btn-back-message-list":"back"},appendHtml:function(e,t,n){var r=this.$el.find("#messages");r.prepend(t.el)},replyClicked:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("thread:reply",this.collection.models[0].get("thread"))},deleteClicked:function(e){e.preventDefault(),e.stopPropagation();var t=this;require(["apps/commons/dialog/dialog_view"],function(e){e.confirm("Are you sure you want to delete this thread?","Delete thread").then(function(e){e&&t.trigger("thread:delete",t.collection.models[0].get("thread"))})})},showReply:function(e){this.$el.find("#replay-container").html(e.render().el)},back:function(e){return e.preventDefault(),e.stopPropagation(),this.trigger("thread:back"),!1}})}),e.MessagesApp.Index.View});