define(["app","text!apps/photos/edit/templates/edit_photo.html","handlebars"],function(e,t,n){return e.module("PhotosApp.Show.View",function(e,r,i,s,o,u){e.EditPhoto=i.Marionette.CollectionView.extend({itemView:t,events:{"click #assign-profile":"assignProfilePhoto","click .btn-primary":"editPhoto","click .btn-danger":"deletePhoto","click .btn-success":"cancel"},editPhoto:function(){this.model.save({title:o("#photo input[name=title]").val()},{patch:!0,wait:!0,success:function(e,t){r.trigger("photos:show",e.get("id"))},error:function(){}})},deletePhoto:function(){var e=this;require(["apps/commons/dialog/dialog_view"],function(t){t.confirm("Are you sure you want to delete this photo?","Delete photo").then(function(t){t&&e.model.destroy({success:function(e,t){r.trigger("photos:user:list",window.user_id)}})})})},cancel:function(){r.trigger("photos:user:list",window.user_id)},assignProfilePhoto:function(){var e=this,t=function(){r.trigger("users:navbar:me"),r.trigger("photos:show",e.model.get("id"))};require(["apps/commons/dialog/dialog_view"],function(n){n.confirm("Are you sure you want to change the profile photo?","Change profile photo").then(function(n){n&&r.request("user:profile_photo:assigne",window.user_id,e.model.get("id"),t,t)})})},onClose:function(){this.model.off()},render:function(){var e=n.compile(t);this.$el.append(e(this.model.attributes))}})}),e.PhotosApp.Show.View});